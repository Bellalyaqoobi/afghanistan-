<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فروشگاه بزرگ افغانستان - خرید آنلاین در سراسر افغانستان</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Noto+Naskh+Arabic:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a5fb4;
            --primary-light: #e8f2ff;
            --secondary-color: #e67e22;
            --accent-color: #2ecc71;
            --accent-light: #e8f8f0;
            --dark-color: #2c3e50;
            --light-color: #f9f9f9;
            --text-color: #333;
            --text-light: #666;
            --border-color: #eaeaea;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 6px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.25s ease;
            --radius: 8px;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #3498db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Vazirmatn', 'Noto Naskh Arabic', sans-serif;
            line-height: 1.5;
            color: var(--text-color);
            background-color: #f8fafc;
            direction: rtl;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* هدر فشرده */
        .compact-header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 10px 0;
            transition: var(--transition);
        }
        
        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .logo {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }
        
        .logo:hover {
            transform: scale(1.02);
        }
        
        .logo-icon {
            color: var(--secondary-color);
            font-size: 1.5rem;
        }
        
        .location-section {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #555;
            font-size: 0.9rem;
            cursor: pointer;
            padding: 6px 12px;
            border-radius: 20px;
            transition: var(--transition);
            background: #f8f9fa;
        }
        
        .location-section:hover {
            background: var(--primary-light);
            color: var(--primary-color);
        }
        
        .search-section {
            flex: 1;
            max-width: 600px;
            position: relative;
        }
        
        .search-box {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 0.95rem;
            outline: none;
            background: #f8f9fa;
            transition: var(--transition);
        }
        
        .search-box:focus {
            border-color: var(--primary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 95, 180, 0.1);
        }
        
        .search-btn {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            border: none;
            color: white;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .search-btn:hover {
            background: #154b8a;
            transform: translateY(-50%) scale(1.05);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #555;
            font-size: 0.85rem;
            position: relative;
            transition: var(--transition);
            padding: 5px;
            border-radius: 8px;
        }
        
        .action-btn:hover {
            color: var(--primary-color);
            background: var(--primary-light);
        }
        
        .action-icon {
            font-size: 1.3rem;
            margin-bottom: 3px;
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            left: 10px;
            background: var(--secondary-color);
            color: white;
            font-size: 0.75rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        
        .compact-nav {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #f0f0f0;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: none;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-link {
            padding: 8px 16px;
            font-size: 0.9rem;
            color: #555;
            text-decoration: none;
            white-space: nowrap;
            border-radius: 20px;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .nav-link:hover, .nav-link.active {
            background: var(--primary-light);
            color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .mobile-nav-btn {
            display: none;
            background: none;
            border: none;
            color: #555;
            font-size: 1.3rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .mobile-nav-btn:hover {
            background: #f5f5f5;
        }
        
        /* بنر تبلیغاتی */
        .promo-banner {
            background: linear-gradient(135deg, #1a5fb4, #2e86de);
            color: white;
            padding: 12px 0;
            text-align: center;
            margin: 10px 0 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            box-shadow: 0 4px 12px rgba(26, 95, 180, 0.2);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 4px 12px rgba(26, 95, 180, 0.2); }
            50% { box-shadow: 0 4px 20px rgba(26, 95, 180, 0.4); }
            100% { box-shadow: 0 4px 12px rgba(26, 95, 180, 0.2); }
        }
        
        .promo-text {
            font-weight: 600;
        }
        
        .promo-highlight {
            background: white;
            color: var(--primary-color);
            padding: 3px 12px;
            border-radius: 20px;
            font-weight: 800;
            margin: 0 5px;
            display: inline-block;
            transform: translateY(-1px);
        }
        
        /* اسلایدر */
        .hero-slider {
            margin: 20px 0;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            position: relative;
            height: 400px;
        }
        
        .slide {
            display: none;
            position: relative;
            height: 100%;
        }
        
        .slide.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0.8; }
            to { opacity: 1; }
        }
        
        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slide-content {
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(to right, rgba(0,0,0,0.85), rgba(0,0,0,0.6));
            color: white;
            padding: 30px;
            width: 50%;
            border-top-left-radius: 20px;
        }
        
        .slide-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .slide-desc {
            font-size: 1rem;
            margin-bottom: 20px;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .btn {
            display: inline-block;
            background: var(--secondary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .btn-primary {
            background: var(--primary-color);
        }
        
        .btn-primary:hover {
            background: #154b8a;
        }
        
        .btn-success {
            background: var(--accent-color);
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-warning {
            background: var(--warning-color);
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-danger {
            background: var(--danger-color);
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .slider-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .slider-dot:hover {
            background: var(--primary-color);
            transform: scale(1.2);
        }
        
        .slider-dot.active {
            background: var(--primary-color);
            transform: scale(1.3);
        }
        
        /* دسته‌بندی‌ها */
        .categories {
            margin: 30px 0;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
            position: relative;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            border-radius: 2px;
        }
        
        .view-all {
            font-size: 0.9rem;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .view-all:hover {
            gap: 10px;
            background: var(--primary-light);
            padding-right: 20px;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 15px;
        }
        
        .category-item {
            background: white;
            border-radius: var(--radius);
            padding: 20px 10px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .category-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-color);
        }
        
        .category-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--primary-color);
            font-size: 1.5rem;
            transition: var(--transition);
        }
        
        .category-item:hover .category-icon {
            transform: scale(1.1) rotate(5deg);
        }
        
        .category-name {
            font-size: 0.9rem;
            color: var(--dark-color);
            font-weight: 600;
        }
        
        /* محصولات - 4 ستونه */
        .products-section {
            margin: 35px 0;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .product-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
            position: relative;
        }
        
        .product-card:hover {
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-color);
            transform: translateY(-5px);
        }
        
        .product-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .product-badge.discount {
            background: var(--danger-color);
        }
        
        .product-badge.new {
            background: var(--info-color);
        }
        
        .product-badge.hot {
            background: var(--warning-color);
        }
        
        .product-actions {
            position: absolute;
            top: 12px;
            left: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0;
            transform: translateX(-10px);
            transition: var(--transition);
            z-index: 2;
        }
        
        .product-card:hover .product-actions {
            opacity: 1;
            transform: translateX(0);
        }
        
        .action-icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            border: none;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            transition: var(--transition);
            font-size: 1rem;
        }
        
        .action-icon-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1) rotate(5deg);
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-title {
            font-size: 0.95rem;
            margin-bottom: 10px;
            color: var(--dark-color);
            height: 42px;
            overflow: hidden;
            line-height: 1.4;
            font-weight: 600;
        }
        
        .product-price {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .price-current {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--primary-color);
        }
        
        .price-old {
            font-size: 0.85rem;
            color: #999;
            text-decoration: line-through;
        }
        
        .add-to-cart {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .add-to-cart:hover {
            background: #154b8a;
        }
        
        .add-to-cart.added {
            background: var(--accent-color);
        }
        
        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 10px;
            color: #f39c12;
            font-size: 0.85rem;
        }
        
        /* بخش ویژه */
        .special-offer {
            background: linear-gradient(135deg, var(--primary-color), #2e86de);
            color: white;
            border-radius: 15px;
            padding: 35px;
            margin: 35px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 10px 30px rgba(26, 95, 180, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .special-offer::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
        }
        
        .offer-content h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            font-weight: 800;
        }
        
        .offer-content p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
            max-width: 500px;
        }
        
        .offer-timer {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 12px;
            display: flex;
            gap: 25px;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .timer-unit {
            display: flex;
            flex-direction: column;
            min-width: 70px;
        }
        
        .timer-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }
        
        .timer-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* خدمات */
        .services {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 35px 0;
            box-shadow: var(--shadow);
            border: 1px solid #f0f0f0;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
        }
        
        .service-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-radius: 10px;
            transition: var(--transition);
        }
        
        .service-item:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
        }
        
        .service-icon {
            width: 50px;
            height: 50px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 1.3rem;
            flex-shrink: 0;
            transition: var(--transition);
        }
        
        .service-item:hover .service-icon {
            background: var(--primary-color);
            color: white;
            transform: rotate(15deg);
        }
        
        .service-text h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: var(--dark-color);
            font-weight: 700;
        }
        
        .service-text p {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        /* برندها */
        .brands-section {
            margin: 35px 0;
        }
        
        .brands-slider {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding: 15px 5px;
            scroll-behavior: smooth;
        }
        
        .brands-slider::-webkit-scrollbar {
            height: 6px;
        }
        
        .brands-slider::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .brands-slider::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .brand-item {
            min-width: 150px;
            height: 90px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-shadow: var(--shadow);
            flex-shrink: 0;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }
        
        .brand-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .brand-item img {
            max-width: 85%;
            max-height: 45px;
            filter: grayscale(100%);
            opacity: 0.7;
            transition: var(--transition);
        }
        
        .brand-item:hover img {
            filter: grayscale(0%);
            opacity: 1;
        }
        
        /* بخش نظرات مشتریان */
        .testimonials {
            margin: 35px 0;
        }
        
        .testimonials-slider {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding: 15px 5px;
            scroll-behavior: smooth;
        }
        
        .testimonial-card {
            min-width: 320px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }
        
        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .customer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(26, 95, 180, 0.2);
        }
        
        .customer-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .customer-info .rating {
            color: #f39c12;
            font-size: 0.9rem;
        }
        
        .testimonial-text {
            font-size: 0.95rem;
            color: var(--text-light);
            line-height: 1.7;
            font-style: italic;
            position: relative;
            padding-right: 15px;
        }
        
        .testimonial-text::before {
            content: '"';
            font-size: 3rem;
            color: var(--primary-light);
            position: absolute;
            top: -20px;
            right: -5px;
            opacity: 0.5;
        }
        
        /* بخش مقالات */
        .blog-section {
            margin: 35px 0;
        }
        
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }
        
        .blog-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .blog-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
        }
        
        .blog-image {
            height: 180px;
            overflow: hidden;
            position: relative;
        }
        
        .blog-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .blog-card:hover .blog-image img {
            transform: scale(1.08);
        }
        
        .blog-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .blog-title {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--dark-color);
            font-weight: 700;
            line-height: 1.4;
        }
        
        .blog-excerpt {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 15px;
            line-height: 1.6;
            flex-grow: 1;
        }
        
        .blog-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #888;
            margin-top: auto;
        }
        
        /* فرآیند خرید */
        .checkout-section {
            display: none;
            margin: 40px 0;
        }
        
        .checkout-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .checkout-steps {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
            padding: 0 10px;
        }
        
        .step-number {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #f0f0f0;
            color: #777;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 10px;
            z-index: 1;
            transition: var(--transition);
            font-size: 1.1rem;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .step.active .step-number {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(26, 95, 180, 0.3);
        }
        
        .step.completed .step-number {
            background: var(--accent-color);
            color: white;
        }
        
        .step-title {
            font-size: 0.9rem;
            color: #777;
            font-weight: 600;
            text-align: center;
        }
        
        .step.active .step-title {
            color: var(--primary-color);
        }
        
        .step-line {
            position: absolute;
            top: 22px;
            right: 50%;
            width: 100%;
            height: 3px;
            background: #f0f0f0;
            z-index: 0;
        }
        
        .step:last-child .step-line {
            display: none;
        }
        
        .step.completed .step-line {
            background: var(--accent-color);
        }
        
        .checkout-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow-hover);
        }
        
        .checkout-step {
            display: none;
        }
        
        .checkout-step.active {
            display: block;
            animation: slideIn 0.4s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .step-title-main {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--dark-color);
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
            font-weight: 700;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: var(--transition);
            font-family: inherit;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 95, 180, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .address-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }
        
        .address-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .address-card.selected {
            border-color: var(--primary-color);
            background: var(--primary-light);
            box-shadow: 0 5px 15px rgba(26, 95, 180, 0.1);
        }
        
        .address-title {
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 1.05rem;
        }
        
        .address-details {
            font-size: 0.95rem;
            color: var(--text-light);
            line-height: 1.6;
        }
        
        .address-actions {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        
        .payment-method {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-method:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .payment-method.selected {
            border-color: var(--primary-color);
            background: var(--primary-light);
            box-shadow: 0 5px 15px rgba(26, 95, 180, 0.1);
        }
        
        .payment-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.05rem;
        }
        
        .order-summary {
            background: #f9f9f9;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #eaeaea;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            font-size: 0.95rem;
        }
        
        .order-item:last-child {
            border-bottom: none;
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--primary-color);
            border-top: 2px solid #eee;
            margin-top: 15px;
        }
        
        .checkout-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid var(--border-color);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #555;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        /* صفحه محصول */
        .product-page {
            display: none;
            margin: 40px 0;
        }
        
        .product-page.active {
            display: block;
        }
        
        .product-detail {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow-hover);
        }
        
        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .main-image {
            height: 450px;
            border-radius: 12px;
            overflow: hidden;
            background: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 20px;
        }
        
        .thumbnails {
            display: flex;
            gap: 12px;
        }
        
        .thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            background: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .thumbnail:hover {
            border-color: var(--primary-color);
            transform: scale(1.05);
        }
        
        .thumbnail.active {
            border-color: var(--primary-color);
            box-shadow: 0 4px 10px rgba(26, 95, 180, 0.2);
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 5px;
        }
        
        .product-info-detail h1 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--dark-color);
            line-height: 1.3;
        }
        
        .product-rating-detail {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .product-price-detail {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 25px;
        }
        
        .product-old-price {
            font-size: 1.4rem;
            color: #999;
            text-decoration: line-through;
            margin-right: 15px;
        }
        
        .product-description {
            margin-bottom: 25px;
            line-height: 1.7;
            color: var(--text-light);
            font-size: 0.95rem;
        }
        
        .product-options {
            margin-bottom: 30px;
        }
        
        .option-group {
            margin-bottom: 20px;
        }
        
        .option-label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .option-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .option-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .option-btn:hover {
            border-color: var(--primary-color);
            background: var(--primary-light);
        }
        
        .option-btn.selected {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
        }
        
        .quantity-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.3rem;
            transition: var(--transition);
            font-weight: 700;
        }
        
        .quantity-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .quantity-value {
            font-size: 1.5rem;
            font-weight: 700;
            min-width: 50px;
            text-align: center;
        }
        
        .product-actions-detail {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .btn-buy {
            flex: 1;
            background: var(--secondary-color);
            font-size: 1.1rem;
            padding: 15px;
            border-radius: 10px;
        }
        
        .product-specs {
            background: #f9f9f9;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .product-specs h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        .spec-label {
            color: var(--text-light);
            font-weight: 500;
        }
        
        .spec-value {
            color: var(--dark-color);
            font-weight: 600;
        }
        
        /* فوتر */
        footer {
            background: var(--dark-color);
            color: white;
            padding: 50px 0 25px;
            margin-top: 60px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid var(--primary-color);
            font-weight: 700;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: white;
            padding-right: 10px;
        }
        
        .footer-links a::before {
            content: "›";
            font-size: 1.2rem;
            opacity: 0;
            transition: var(--transition);
        }
        
        .footer-links a:hover::before {
            opacity: 1;
        }
        
        .social-icons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .social-icon:hover {
            background: var(--primary-color);
            transform: translateY(-5px) rotate(5deg);
        }
        
        .newsletter {
            margin-top: 20px;
        }
        
        .newsletter-input {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        
        .newsletter-input input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .newsletter-input input::placeholder {
            color: #aaa;
        }
        
        .newsletter-input button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .newsletter-input button:hover {
            background: #154b8a;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .payment-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .payment-icon {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* مودال‌ها */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(3px);
        }
        
        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transform: translateY(20px);
            animation: modalSlideIn 0.4s ease forwards;
        }
        
        @keyframes modalSlideIn {
            to {
                transform: translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }
        
        .modal-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: #777;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            background: #f5f5f5;
            color: var(--danger-color);
            transform: rotate(90deg);
        }
        
        /* صفحه حساب کاربری */
        .account-page {
            display: none;
            margin: 40px 0;
        }
        
        .account-page.active {
            display: block;
        }
        
        .account-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 40px;
        }
        
        .account-sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow-hover);
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .account-user {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--info-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(26, 95, 180, 0.2);
        }
        
        .account-menu {
            list-style: none;
        }
        
        .account-menu li {
            margin-bottom: 10px;
        }
        
        .account-menu a {
            display: block;
            padding: 12px 15px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .account-menu a:hover, .account-menu a.active {
            background: var(--primary-light);
            color: var(--primary-color);
            transform: translateX(-5px);
        }
        
        .account-menu a i {
            font-size: 1.1rem;
            width: 20px;
        }
        
        .account-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow-hover);
        }
        
        .account-section {
            display: none;
        }
        
        .account-section.active {
            display: block;
        }
        
        .section-title-account {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--dark-color);
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
            font-weight: 700;
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .orders-table th, .orders-table td {
            padding: 15px;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
        }
        
        .orders-table th {
            background: #f9f9f9;
            font-weight: 700;
            color: var(--dark-color);
            position: sticky;
            top: 0;
        }
        
        .order-status {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            display: inline-block;
        }
        
        .status-delivered {
            background: var(--accent-light);
            color: var(--accent-color);
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-processing {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-shipped {
            background: #d4edda;
            color: #155724;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #f9f9f9, #f0f0f0);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            transition: var(--transition);
            border: 1px solid #eee;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        /* نوتیفیکیشن */
        .notification {
            position: fixed;
            top: 30px;
            left: 30px;
            background: var(--accent-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            z-index: 3000;
            display: none;
            max-width: 350px;
            border-left: 5px solid white;
        }
        
        .notification.show {
            display: block;
            animation: slideInLeft 0.3s ease;
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* بخش جدید: فیلتر محصولات */
        .products-filter {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
        }
        
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .filter-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        
        .filter-group {
            margin-bottom: 15px;
        }
        
        .filter-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .filter-values {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filter-chip {
            padding: 8px 15px;
            background: #f5f5f5;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .filter-chip:hover {
            background: var(--primary-light);
            color: var(--primary-color);
        }
        
        .filter-chip.active {
            background: var(--primary-color);
            color: white;
        }
        
        /* بخش جدید: مقایسه محصولات */
        .compare-section {
            margin: 40px 0;
            display: none;
        }
        
        .compare-section.active {
            display: block;
        }
        
        .compare-table {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow-hover);
            overflow-x: auto;
        }
        
        /* بخش جدید: محصولات پیشنهادی */
        .recommended-section {
            margin: 40px 0;
        }
        
        .recommended-slider {
            display: flex;
            overflow-x: auto;
            gap: 20px;
            padding: 15px 5px;
        }
        
        /* بخش جدید: آمار و اطلاعات */
        .stats-section {
            background: linear-gradient(135deg, var(--primary-color), #2e86de);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin: 40px 0;
            text-align: center;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        .stat-item h3 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
        }
        
        .stat-item p {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* بخش جدید: تخفیف‌های ویژه */
        .discounts-section {
            margin: 40px 0;
        }
        
        .discount-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }
        
        .discount-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .discount-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
        }
        
        .discount-percent {
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        /* ریسپانسیو */
        @media (max-width: 1200px) {
            .categories-grid {
                grid-template-columns: repeat(8, 1fr);
            }
            
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .services-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
                gap: 30px;
            }
            
            .account-container {
                grid-template-columns: 250px 1fr;
                gap: 30px;
            }
        }
        
        @media (max-width: 992px) {
            .categories-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .blog-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .discount-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .product-detail {
                grid-template-columns: 1fr;
            }
            
            .main-image {
                height: 350px;
            }
            
            .checkout-steps .step-title {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .search-section {
                order: 3;
                width: 100%;
                max-width: 100%;
                margin-top: 15px;
            }
            
            .mobile-nav-btn {
                display: flex;
            }
            
            .header-actions .action-btn span {
                display: none;
            }
            
            .action-icon {
                font-size: 1.5rem;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                right: 0;
                width: 100%;
                background: white;
                flex-direction: column;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                border-radius: 0 0 15px 15px;
                z-index: 100;
                padding: 15px;
                max-height: 70vh;
                overflow-y: auto;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-link {
                padding: 15px 20px;
                border-bottom: 1px solid #f5f5f5;
                border-radius: 10px;
            }
            
            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .slide-content {
                width: 80%;
                padding: 20px;
            }
            
            .slide-title {
                font-size: 1.4rem;
            }
            
            .slide-desc {
                font-size: 0.9rem;
            }
            
            .special-offer {
                flex-direction: column;
                gap: 25px;
                text-align: center;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .account-container {
                grid-template-columns: 1fr;
            }
            
            .account-sidebar {
                position: static;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .hero-slider {
                height: 300px;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }
            
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .slide-content {
                width: 100%;
                position: relative;
                background: rgba(0, 0, 0, 0.85);
                padding: 15px;
            }
            
            .slide img {
                height: 250px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .checkout-steps .step-title {
                font-size: 0.7rem;
            }
            
            .product-actions-detail {
                flex-direction: column;
            }
            
            .btn-buy {
                width: 100%;
            }
            
            .blog-grid {
                grid-template-columns: 1fr;
            }
            
            .discount-cards {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .header-top {
                flex-wrap: wrap;
            }
            
            .logo-section {
                order: 1;
            }
            
            .header-actions {
                order: 2;
            }
            
            .location-section {
                order: 4;
                margin-top: 10px;
                width: 100%;
                justify-content: center;
            }
            
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero-slider {
                height: 250px;
            }
            
            .modal-content {
                padding: 20px;
            }
        }
        
        /* انیمیشن‌های اضافی */
        @keyframes bounce {
            0%, 20%, 60%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            80% {
                transform: translateY(-5px);
            }
        }
        
        .bounce:hover {
            animation: bounce 0.6s;
        }
        
        /* اسکلتون برای لودینگ */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }
        
        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
        
        /* دکمه بازگشت به بالا */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0;
            visibility: hidden;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background: #154b8a;
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <!-- هدر فشرده -->
    <header class="compact-header">
        <div class="container">
            <div class="header-top">
                <div class="logo-section">
                    <a href="#" class="logo bounce" onclick="showHomePage()">
                        <i class="fas fa-store-alt logo-icon"></i>
                        <span>فروشگاه افغانستان</span>
                    </a>
                </div>
                
                <div class="location-section bounce" id="locationBtn">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="currentCity">کابل</span>
                    <i class="fas fa-chevron-down" style="font-size: 0.8rem;"></i>
                </div>
                
                <div class="search-section">
                    <input type="text" class="search-box" id="searchInput" placeholder="جستجوی محصولات، برندها و دسته‌بندی‌ها...">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="header-actions">
                    <a href="#" class="action-btn bounce" id="accountBtn" onclick="showAccountPage()">
                        <i class="fas fa-user action-icon"></i>
                        <span>حساب کاربری</span>
                    </a>
                    <a href="#" class="action-btn bounce cart-icon" id="cartBtn">
                        <i class="fas fa-shopping-cart action-icon"></i>
                        <span>سبد خرید</span>
                        <span class="cart-count" id="cartCount">0</span>
                    </a>
                </div>
                
                <button class="mobile-nav-btn bounce" id="mobileNavBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="compact-nav">
                <ul class="nav-links" id="navLinks">
                    <li><a href="#" class="nav-link active" onclick="showHomePage()"><i class="fas fa-home" style="margin-left: 8px;"></i>صفحه اصلی</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('electronics')"><i class="fas fa-tv" style="margin-left: 8px;"></i>الکترونیک</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('clothing')"><i class="fas fa-tshirt" style="margin-left: 8px;"></i>پوشاک</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('home')"><i class="fas fa-home" style="margin-left: 8px;"></i>خانه و آشپزخانه</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('mobile')"><i class="fas fa-mobile-alt" style="margin-left: 8px;"></i>موبایل</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('supermarket')"><i class="fas fa-shopping-cart" style="margin-left: 8px;"></i>سوپرمارکت</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('beauty')"><i class="fas fa-spa" style="margin-left: 8px;"></i>زیبایی</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('books')"><i class="fas fa-book" style="margin-left: 8px;"></i>کتاب</a></li>
                    <li><a href="#" class="nav-link" onclick="showCategory('sports')"><i class="fas fa-futbol" style="margin-left: 8px;"></i>ورزشی</a></li>
                    <li><a href="#" class="nav-link" onclick="showCompareSection()"><i class="fas fa-balance-scale" style="margin-left: 8px;"></i>مقایسه</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- بنر تبلیغاتی -->
    <div class="promo-banner container">
        <p class="promo-text">🚚 ارسال رایگان به سراسر افغانستان | خرید بالای <span class="promo-highlight">۵۰۰,۰۰۰ افغانی</span> | پرداخت در محل | تضمین بهترین قیمت</p>
    </div>
    
    <!-- صفحه اصلی -->
    <div id="homePage">
        <!-- اسلایدر -->
        <section class="hero-slider container">
            <div class="slide active">
                <img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&q=80" alt="تخفیف ویژه">
                <div class="slide-content">
                    <h3 class="slide-title">فروش ویژه تابستان ۱۴۰۲</h3>
                    <p class="slide-desc">تا ۷۰٪ تخفیف روی هزاران محصول از برندهای معتبر جهانی و داخلی</p>
                    <a href="#" class="btn btn-warning" onclick="showCategory('discount')"><i class="fas fa-bolt" style="margin-left: 8px;"></i>مشاهده پیشنهادات</a>
                </div>
            </div>
            
            <div class="slide">
                <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&q=80" alt="تکنولوژی">
                <div class="slide-content">
                    <h3 class="slide-title">جدیدترین تکنولوژی‌های ۲۰۲۳</h3>
                    <p class="slide-desc">لپ‌تاپ، موبایل، تبلت و گجت‌های هوشمند با گارانتی معتبر</p>
                    <a href="#" class="btn btn-primary" onclick="showCategory('electronics')"><i class="fas fa-laptop" style="margin-left: 8px;"></i>مشاهده محصولات</a>
                </div>
            </div>
            
            <div class="slide">
                <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1400&q=80" alt="مد و پوشاک">
                <div class="slide-content">
                    <h3 class="slide-title">مجموعه بهاری مد و پوشاک</h3>
                    <p class="slide-desc">آخرین ترندهای مد روز با کیفیت عالی و قیمت مناسب</p>
                    <a href="#" class="btn btn-success" onclick="showCategory('clothing')"><i class="fas fa-tshirt" style="margin-left: 8px;"></i>خرید پوشاک</a>
                </div>
            </div>
            
            <div class="slider-controls">
                <div class="slider-dot active" data-slide="0"></div>
                <div class="slider-dot" data-slide="1"></div>
                <div class="slider-dot" data-slide="2"></div>
            </div>
        </section>
        
        <!-- دسته‌بندی‌ها -->
        <section class="categories container">
            <div class="section-header">
                <h2 class="section-title">دسته‌بندی محصولات</h2>
                <a href="#" class="view-all bounce" onclick="showAllCategories()">
                    مشاهده همه
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="categories-grid" id="categoriesGrid">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- فیلتر محصولات -->
        <section class="products-filter container" id="productsFilter">
            <div class="filter-header">
                <h3 style="font-size: 1.2rem; font-weight: 700; color: var(--dark-color);">فیلتر محصولات</h3>
                <button class="btn btn-secondary" onclick="resetFilters()">حذف فیلترها</button>
            </div>
            
            <div class="filter-options">
                <div class="filter-group">
                    <div class="filter-title">قیمت</div>
                    <div class="filter-values">
                        <div class="filter-chip" onclick="filterByPrice('under500k')">زیر ۵۰۰ هزار</div>
                        <div class="filter-chip" onclick="filterByPrice('500k-2m')">۵۰۰ هزار تا ۲ میلیون</div>
                        <div class="filter-chip" onclick="filterByPrice('2m-5m')">۲ تا ۵ میلیون</div>
                        <div class="filter-chip" onclick="filterByPrice('over5m')">بالای ۵ میلیون</div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <div class="filter-title">برند</div>
                    <div class="filter-values">
                        <div class="filter-chip" onclick="filterByBrand('samsung')">سامسونگ</div>
                        <div class="filter-chip" onclick="filterByBrand('apple')">اپل</div>
                        <div class="filter-chip" onclick="filterByBrand('sony')">سونی</div>
                        <div class="filter-chip" onclick="filterByBrand('lg')">ال‌جی</div>
                        <div class="filter-chip" onclick="filterByBrand('xiaomi')">شیائومی</div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <div class="filter-title">رتبه‌بندی</div>
                    <div class="filter-values">
                        <div class="filter-chip" onclick="filterByRating(4)">۴ ستاره به بالا</div>
                        <div class="filter-chip" onclick="filterByRating(3)">۳ ستاره به بالا</div>
                        <div class="filter-chip" onclick="filterByRating(5)">۵ ستاره</div>
                    </div>
                </div>
                
                <div class="filter-group">
                    <div class="filter-title">وضعیت</div>
                    <div class="filter-values">
                        <div class="filter-chip" onclick="filterByStatus('discount')">تخفیف‌دار</div>
                        <div class="filter-chip" onclick="filterByStatus('new')">جدید</div>
                        <div class="filter-chip" onclick="filterByStatus('bestseller')">پرفروش</div>
                        <div class="filter-chip" onclick="filterByStatus('instock')">موجود</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- محصولات پرفروش -->
        <section class="products-section container">
            <div class="section-header">
                <h2 class="section-title">پرفروش‌ترین محصولات هفته</h2>
                <a href="#" class="view-all bounce" onclick="showCategory('best-selling')">
                    مشاهده همه
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="products-grid" id="featuredProducts">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- آمار و اطلاعات -->
        <section class="stats-section container">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3 id="customerCount">۵۰,۰۰۰+</h3>
                    <p>مشتری راضی</p>
                </div>
                <div class="stat-item">
                    <h3 id="productCount">۱۰,۰۰۰+</h3>
                    <p>محصول متنوع</p>
                </div>
                <div class="stat-item">
                    <h3 id="orderCount">۱۰۰,۰۰۰+</h3>
                    <p>سفارش موفق</p>
                </div>
                <div class="stat-item">
                    <h3 id="cityCount">۳۴+</h3>
                    <p>شهر تحت پوشش</p>
                </div>
            </div>
        </section>
        
        <!-- پیشنهاد ویژه -->
        <section class="special-offer container">
            <div class="offer-content">
                <h2>پیشنهاد شگفت‌انگیز!</h2>
                <p>فقط امروز: گوشی سامسونگ گلکسی S23 اولترا با ۳۵٪ تخفیف + هدیه رایگان</p>
                <div class="offer-timer">
                    <div class="timer-unit">
                        <div class="timer-value" id="hours">12</div>
                        <div class="timer-label">ساعت</div>
                    </div>
                    <div class="timer-unit">
                        <div class="timer-value" id="minutes">45</div>
                        <div class="timer-label">دقیقه</div>
                    </div>
                    <div class="timer-unit">
                        <div class="timer-value" id="seconds">30</div>
                        <div class="timer-label">ثانیه</div>
                    </div>
                </div>
            </div>
            <div>
                <button class="btn btn-success bounce" onclick="showProductDetail(1)"><i class="fas fa-gift" style="margin-left: 8px;"></i>مشاهده پیشنهاد</button>
            </div>
        </section>
        
        <!-- خدمات -->
        <section class="services container">
            <div class="services-grid">
                <div class="service-item">
                    <div class="service-icon">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <div class="service-text">
                        <h4>ارسال سریع و رایگان</h4>
                        <p>ارسال به تمام ولایت‌های افغانستان در ۲۴-۷۲ ساعت</p>
                    </div>
                </div>
                
                <div class="service-item">
                    <div class="service-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="service-text">
                        <h4>گارانتی بازگشت</h4>
                        <p>۷ روز ضمانت بازگشت وجه در صورت نارضایتی</p>
                    </div>
                </div>
                
                <div class="service-item">
                    <div class="service-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="service-text">
                        <h4>پشتیبانی ۲۴/۷</h4>
                        <p>پشتیبانی تلفنی و آنلاین در تمام ساعات</p>
                    </div>
                </div>
                
                <div class="service-item">
                    <div class="service-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="service-text">
                        <h4>پرداخت امن</h4>
                        <p>پرداخت آنلاین امن و پرداخت در محل</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- محصولات جدید -->
        <section class="products-section container">
            <div class="section-header">
                <h2 class="section-title">جدیدترین محصولات</h2>
                <a href="#" class="view-all bounce" onclick="showCategory('new')">
                    مشاهده همه
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="products-grid" id="newProducts">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- تخفیف‌های ویژه -->
        <section class="discounts-section container">
            <div class="section-header">
                <h2 class="section-title">تخفیف‌های ویژه امروز</h2>
                <a href="#" class="view-all bounce" onclick="showCategory('discount')">
                    مشاهده همه
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="discount-cards" id="discountCards">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- محصولات پیشنهادی -->
        <section class="recommended-section container">
            <div class="section-header">
                <h2 class="section-title">پیشنهادات ویژه برای شما</h2>
            </div>
            
            <div class="recommended-slider" id="recommendedSlider">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- نظرات مشتریان -->
        <section class="testimonials container">
            <div class="section-header">
                <h2 class="section-title">نظرات مشتریان راضی</h2>
                <a href="#" class="view-all bounce" onclick="showAllTestimonials()">
                    همه نظرات
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="testimonials-slider" id="testimonialsSlider">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- برندها -->
        <section class="brands-section container">
            <div class="section-header">
                <h2 class="section-title">برندهای همکار ما</h2>
            </div>
            
            <div class="brands-slider" id="brandsSlider">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- مقالات وبلاگ -->
        <section class="blog-section container">
            <div class="section-header">
                <h2 class="section-title">مقالات آموزشی و اخبار</h2>
                <a href="#" class="view-all bounce">
                    مشاهده همه مقالات
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>
            
            <div class="blog-grid" id="blogGrid">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
        
        <!-- مقایسه محصولات -->
        <section class="compare-section container" id="compareSection">
            <div class="section-header">
                <h2 class="section-title">مقایسه محصولات</h2>
                <button class="btn btn-danger" onclick="closeCompareSection()">بستن مقایسه</button>
            </div>
            
            <div class="compare-table" id="compareTable">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </section>
    </div>
    
    <!-- صفحه محصول -->
    <section class="product-page container" id="productPage">
        <!-- با JavaScript پر می‌شود -->
    </section>
    
    <!-- فرآیند خرید -->
    <section class="checkout-section container" id="checkoutSection">
        <!-- با JavaScript پر می‌شود -->
    </section>
    
    <!-- صفحه حساب کاربری -->
    <section class="account-page container" id="accountPage">
        <!-- با JavaScript پر می‌شود -->
    </section>
    
    <!-- دکمه بازگشت به بالا -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <!-- فوتر -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>فروشگاه بزرگ افغانستان</h3>
                    <p style="font-size: 0.9rem; color: #ccc; margin-top: 15px; line-height: 1.6;">اولین و بزرگترین فروشگاه آنلاین در افغانستان با ارائه گسترده‌ترین محصولات از برندهای معتبر جهانی و داخلی. ما با افتخار به تمام هموطنان در سراسر افغانستان خدمت‌رسانی می‌کنیم.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon bounce"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon bounce"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon bounce"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="social-icon bounce"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="social-icon bounce"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>لینک‌های مفید</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showAccountPage('about')"><i class="fas fa-info-circle"></i> درباره ما</a></li>
                        <li><a href="#" onclick="showAccountPage('contact')"><i class="fas fa-phone"></i> تماس با ما</a></li>
                        <li><a href="#" onclick="showAccountPage('faq')"><i class="fas fa-question-circle"></i> سوالات متداول</a></li>
                        <li><a href="#" onclick="showAccountPage('privacy')"><i class="fas fa-shield-alt"></i> حریم خصوصی</a></li>
                        <li><a href="#" onclick="showAccountPage('terms')"><i class="fas fa-file-contract"></i> قوانین و مقررات</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>خدمات مشتریان</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showAccountPage('orders')"><i class="fas fa-shopping-bag"></i> پیگیری سفارش</a></li>
                        <li><a href="#" onclick="showAccountPage('guide')"><i class="fas fa-book"></i> راهنمای خرید</a></li>
                        <li><a href="#" onclick="showAccountPage('return')"><i class="fas fa-exchange-alt"></i> بازگرداندن کالا</a></li>
                        <li><a href="#" onclick="showAccountPage('warranty')"><i class="fas fa-certificate"></i> گارانتی محصولات</a></li>
                        <li><a href="#" onclick="showAccountPage('branches')"><i class="fas fa-map-marker-alt"></i> شعب فروشگاه</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>عضویت در خبرنامه</h3>
                    <p style="font-size: 0.9rem; color: #ccc; margin-top: 15px; line-height: 1.6;">برای دریافت جدیدترین تخفیف‌ها، پیشنهادات ویژه و اخبار فروشگاه در خبرنامه عضو شوید.</p>
                    <div class="newsletter">
                        <div class="newsletter-input">
                            <input type="email" id="newsletterEmail" placeholder="آدرس ایمیل شما">
                            <button onclick="subscribeNewsletter()">عضویت</button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4 style="font-size: 1rem; margin-bottom: 10px;">تماس با پشتیبانی</h4>
                        <p style="font-size: 0.9rem; color: #ccc;">
                            <i class="fas fa-phone" style="margin-left: 8px;"></i> ۰۷۸۰۱۲۳۴۵۶۷
                        </p>
                        <p style="font-size: 0.9rem; color: #ccc; margin-top: 5px;">
                            <i class="fas fa-envelope" style="margin-left: 8px;"></i> info@afghanstore.af
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>کلیه حقوق این وبسایت متعلق به فروشگاه بزرگ افغانستان می‌باشد © ۱۴۰۲ - طراحی و توسعه با ❤️ در افغانستان</p>
                <div class="payment-icons">
                    <span class="payment-icon"><i class="fas fa-credit-card"></i> پرداخت آنلاین</span>
                    <span class="payment-icon"><i class="fas fa-truck"></i> تحویل در محل</span>
                    <span class="payment-icon"><i class="fas fa-shield-check"></i> ضمانت بازگشت</span>
                    <span class="payment-icon"><i class="fas fa-lock"></i> امنیت بالا</span>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- مودال‌ها -->
    <div class="modal" id="locationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">انتخاب شهر برای ارسال</h3>
                <button class="modal-close" id="closeLocationModal">&times;</button>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-height: 500px; overflow-y: auto; padding: 15px 0;">
                <!-- شهرها با JavaScript پر می‌شود -->
            </div>
        </div>
    </div>
    
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">سبد خرید شما</h3>
                <button class="modal-close" id="closeCartModal">&times;</button>
            </div>
            
            <div id="cartItems">
                <!-- آیتم‌های سبد خرید با JavaScript پر می‌شود -->
            </div>
            
            <div id="cartSummary" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 2px solid var(--border-color);">
                <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: 700; font-size: 1.1rem;">
                    <span>جمع کل سبد خرید:</span>
                    <span id="cartTotalPrice">۰ افغانی</span>
                </div>
                <button class="btn btn-success" style="width: 100%; font-size: 1rem; padding: 15px;" onclick="startCheckout()">
                    <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i> ادامه فرآیند خرید
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ورود به حساب کاربری</h3>
                <button class="modal-close" id="closeLoginModal">&times;</button>
            </div>
            
            <div>
                <div class="form-group">
                    <label class="form-label">شماره موبایل</label>
                    <input type="text" class="form-input" id="loginPhone" placeholder="مثال: ۰۷۸۰۱۲۳۴۵۶۷">
                </div>
                
                <div class="form-group">
                    <label class="form-label">رمز عبور</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="رمز عبور خود را وارد کنید">
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9rem;">
                        <input type="checkbox" id="rememberMe">
                        مرا به خاطر بسپار
                    </label>
                    <a href="#" style="color: var(--primary-color); font-size: 0.9rem;">فراموشی رمز عبور</a>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; margin-bottom: 20px; padding: 15px;" onclick="login()">
                    <i class="fas fa-sign-in-alt" style="margin-left: 8px;"></i> ورود به حساب کاربری
                </button>
                
                <div style="text-align: center; margin: 20px 0; position: relative;">
                    <span style="background: white; padding: 0 15px; position: relative; z-index: 1; color: #777; font-size: 0.9rem;">یا</span>
                    <hr style="position: absolute; top: 50%; right: 0; left: 0; border: none; border-top: 1px solid #eee; margin: 0;">
                </div>
                
                <div style="text-align: center; margin: 15px 0;">
                    <span style="color: #777; font-size: 0.95rem;">حساب کاربری ندارید؟</span>
                    <a href="#" style="color: var(--primary-color); margin-right: 8px; font-size: 0.95rem; font-weight: 600;" onclick="showRegisterModal()">ثبت‌نام کنید</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ثبت‌نام حساب کاربری جدید</h3>
                <button class="modal-close" id="closeRegisterModal">&times;</button>
            </div>
            
            <div>
                <div class="form-group">
                    <label class="form-label">نام و نام خانوادگی <span style="color: var(--danger-color);">*</span></label>
                    <input type="text" class="form-input" id="registerName" placeholder="نام کامل خود را وارد کنید">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">شماره موبایل <span style="color: var(--danger-color);">*</span></label>
                        <input type="text" class="form-input" id="registerPhone" placeholder="۰۷۸۰۱۲۳۴۵۶۷">
                    </div>
                    <div class="form-group">
                        <label class="form-label">کد ملی</label>
                        <input type="text" class="form-input" id="registerNationalId" placeholder="کد ملی (اختیاری)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ایمیل (اختیاری)</label>
                    <input type="email" class="form-input" id="registerEmail" placeholder="email@example.com">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">رمز عبور <span style="color: var(--danger-color);">*</span></label>
                        <input type="password" class="form-input" id="registerPassword" placeholder="حداقل ۶ کاراکتر">
                    </div>
                    <div class="form-group">
                        <label class="form-label">تکرار رمز عبور <span style="color: var(--danger-color);">*</span></label>
                        <input type="password" class="form-input" id="registerConfirmPassword" placeholder="تکرار رمز عبور">
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: flex-start; gap: 10px; font-size: 0.9rem;">
                        <input type="checkbox" id="acceptTerms" style="margin-top: 3px;">
                        <span>با <a href="#" style="color: var(--primary-color);">قوانین و مقررات</a> و <a href="#" style="color: var(--primary-color);">حریم خصوصی</a> فروشگاه موافقم.</span>
                    </label>
                </div>
                
                <button class="btn btn-success" style="width: 100%; padding: 15px;" onclick="register()">
                    <i class="fas fa-user-plus" style="margin-left: 8px;"></i> ثبت‌نام و ایجاد حساب
                </button>
                
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" style="color: var(--primary-color); font-size: 0.95rem; font-weight: 600;" onclick="showLoginModal()">قبلاً ثبت‌نام کرده‌اید؟ وارد شوید</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="addressModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">افزودن آدرس جدید</h3>
                <button class="modal-close" id="closeAddressModal">&times;</button>
            </div>
            
            <div>
                <div class="form-group">
                    <label class="form-label">عنوان آدرس <span style="color: var(--danger-color);">*</span></label>
                    <input type="text" class="form-input" id="addressTitle" placeholder="مثال: منزل، محل کار، دفتر">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">شهر <span style="color: var(--danger-color);">*</span></label>
                        <select class="form-select" id="addressCity">
                            <option value="">انتخاب شهر</option>
                            <!-- شهرها با JavaScript پر می‌شود -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">منطقه <span style="color: var(--danger-color);">*</span></label>
                        <input type="text" class="form-input" id="addressArea" placeholder="مثال: کارته سخی، وزیر اکبرخان">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">آدرس کامل <span style="color: var(--danger-color);">*</span></label>
                    <textarea class="form-textarea" id="addressFull" rows="4" placeholder="آدرس کامل شامل خیابان، کوچه، پلاک، واحد و ..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">کد پستی (اختیاری)</label>
                        <input type="text" class="form-input" id="addressPostalCode" placeholder="کد پستی ۱۰ رقمی">
                    </div>
                    <div class="form-group">
                        <label class="form-label">شماره تماس <span style="color: var(--danger-color);">*</span></label>
                        <input type="text" class="form-input" id="addressPhone" placeholder="شماره تماس جهت هماهنگی">
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="addressDefault">
                        <span>این آدرس را به عنوان آدرس پیش‌فرض تنظیم کن</span>
                    </label>
                </div>
                
                <button class="btn btn-success" style="width: 100%; padding: 15px;" onclick="saveAddress()">
                    <i class="fas fa-save" style="margin-left: 8px;"></i> ذخیره آدرس
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="productQuickView">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">مشاهده سریع محصول</h3>
                <button class="modal-close" id="closeQuickView">&times;</button>
            </div>
            <div id="quickViewContent">
                <!-- با JavaScript پر می‌شود -->
            </div>
        </div>
    </div>
    
    <!-- نوتیفیکیشن -->
    <div class="notification" id="notification">
        <span id="notificationText"></span>
    </div>

    <script>
        // داده‌های کامل و گسترش یافته
        const appData = {
            categories: [
                { id: 1, name: "موبایل و تبلت", icon: "fas fa-mobile-alt", color: "#3498db", slug: "mobile", count: 1250 },
                { id: 2, name: "لپ‌تاپ و کامپیوتر", icon: "fas fa-laptop", color: "#2ecc71", slug: "laptop", count: 680 },
                { id: 3, name: "پوشاک مردانه", icon: "fas fa-male", color: "#e74c3c", slug: "men-clothing", count: 2350 },
                { id: 4, name: "پوشاک زنانه", icon: "fas fa-female", color: "#9b59b6", slug: "women-clothing", count: 3100 },
                { id: 5, name: "کیف و کفش", icon: "fas fa-shopping-bag", color: "#1abc9c", slug: "bags-shoes", count: 1890 },
                { id: 6, name: "خانه و آشپزخانه", icon: "fas fa-home", color: "#f1c40f", slug: "home-kitchen", count: 4250 },
                { id: 7, name: "زیبایی و سلامت", icon: "fas fa-spa", color: "#e67e22", slug: "beauty-health", count: 2750 },
                { id: 8, name: "کتاب و لوازم تحریر", icon: "fas fa-book", color: "#34495e", slug: "books-stationery", count: 1580 },
                { id: 9, name: "اسباب‌بازی و کودک", icon: "fas fa-child", color: "#8e44ad", slug: "toys-kids", count: 980 },
                { id: 10, name: "خودرو و موتور", icon: "fas fa-car", color: "#16a085", slug: "auto-moto", count: 750 },
                { id: 11, name: "ورزش و سفر", icon: "fas fa-futbol", color: "#c0392b", slug: "sports-travel", count: 1120 },
                { id: 12, name: "کالای دیجیتال", icon: "fas fa-tv", color: "#2980b9", slug: "digital", count: 1950 },
                { id: 13, name: "سوپرمارکت", icon: "fas fa-shopping-cart", color: "#27ae60", slug: "supermarket", count: 5200 },
                { id: 14, name: "لوازم آرایشی", icon: "fas fa-palette", color: "#d35400", slug: "cosmetics", count: 1650 },
                { id: 15, name: "مواد غذایی", icon: "fas fa-utensils", color: "#8e44ad", slug: "food", count: 3850 },
                { id: 16, name: "ابزار و تجهیزات", icon: "fas fa-tools", color: "#7f8c8d", slug: "tools", count: 1250 },
                { id: 17, name: "صنایع دستی", icon: "fas fa-hands", color: "#f39c12", slug: "handicrafts", count: 850 },
                { id: 18, name: "آرایشگاه و بهداشت", icon: "fas fa-cut", color: "#9b59b6", slug: "salon-hygiene", count: 920 },
                { id: 19, name: "تجهیزات پزشکی", icon: "fas fa-stethoscope", color: "#e74c3c", slug: "medical", count: 650 },
                { id: 20, name: "دوربین و عکاسی", icon: "fas fa-camera", color: "#2c3e50", slug: "camera", count: 480 }
            ],
            
            featuredProducts: [
                { 
                    id: 1, 
                    name: "گوشی موبایل سامسونگ گلکسی A54 دو سیم‌کارت 128GB", 
                    price: 18500000, 
                    oldPrice: 22000000, 
                    image: "https://images.unsplash.com/photo-1610945265064-0e34e5519bbf?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "new", 
                    rating: 4.5,
                    category: "موبایل و تبلت",
                    description: "گوشی سامسونگ گلکسی A54 با پردازنده قدرتمند Exynos 1380، حافظه 128 گیگابایت، رم 8 گیگابایت، باتری 5000 میلی‌آمپر با شارژ 25 وات و دوربین سه گانه 50 مگاپیکسلی اصلی + 12 مگاپیکسل اولترا واید + 5 مگاپیکسل ماکرو. نمایشگر 6.4 اینچی Super AMOLED با نرخ تازه‌سازی 120 هرتز.",
                    colors: ["مشکی", "سفید", "آبی", "بنفش"],
                    storage: ["128GB", "256GB"],
                    brand: "samsung",
                    inStock: true,
                    discount: 15
                },
                { 
                    id: 2, 
                    name: "هدفون بی‌سیم Sony WH-1000XM4 نویزکنسلینگ", 
                    price: 3200000, 
                    oldPrice: 3800000, 
                    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.8,
                    category: "کالای دیجیتال",
                    description: "هدفون حرفه‌ای Sony WH-1000XM4 با نویزکنسلینگ فعال پیشرفته، پردازنده HD QN1، باتری 30 ساعته با 10 دقیقه شارژ برای 5 ساعت استفاده، کیفیت صدای Hi-Res Audio، کنترل لمسی و میکروفون با حذف نویز.",
                    colors: ["مشکی", "نقره‌ای", "طلایی"],
                    brand: "sony",
                    inStock: true,
                    discount: 18
                },
                { 
                    id: 3, 
                    name: "لپ‌تاپ ایسوس ویووبوک 15 اینچ مدل 2023", 
                    price: 28500000, 
                    oldPrice: 32000000, 
                    image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "hot", 
                    rating: 4.3,
                    category: "لپ‌تاپ و کامپیوتر",
                    description: "لپ‌تاپ ایسوس ویووبوک 15 اینچ با پردازنده Intel Core i7 نسل 13، رم 16 گیگابایت DDR4، هارد 512 گیگابایت SSD NVMe، گرافیک Intel Iris Xe، نمایشگر IPS Full HD با قاب باریک، وزن 1.7 کیلوگرم و باتری 50 وات‌ساعت.",
                    storage: ["512GB SSD", "1TB SSD"],
                    brand: "asus",
                    inStock: true,
                    discount: 12
                },
                { 
                    id: 4, 
                    name: "کفش ورزشی نایک ایرفورس مدل 2023", 
                    price: 1650000, 
                    oldPrice: 2100000, 
                    image: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.2,
                    category: "کیف و کفش",
                    description: "کفش ورزشی نایک ایرفورس 2023 با کفی Air-Sole برای راحتی بیشتر، رویه چرمی و مش برای تنفس بهتر، طراحی کلاسیک و مدرن، مناسب برای ورزش، پیاده‌روی و استفاده روزمره.",
                    sizes: ["38", "39", "40", "41", "42", "43", "44"],
                    colors: ["سفید", "مشکی", "آبی", "قرمز"],
                    brand: "nike",
                    inStock: true,
                    discount: 22
                },
                { 
                    id: 5, 
                    name: "ساعت هوشمند اپل واچ سری 8 45mm", 
                    price: 12500000, 
                    oldPrice: 15000000, 
                    image: "https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "new", 
                    rating: 4.7,
                    category: "کالای دیجیتال",
                    description: "ساعت هوشمند اپل واچ سری 8 با نمایشگر همیشه روشن Retina، تراشه S8، مانیتورینگ سلامت پیشرفته شامل ECG، اندازه‌گیری اکسیژن خون، ردیابی خواب، GPS، مقاوم در برابر آب تا 50 متر و باتری 18 ساعته.",
                    colors: ["مشکی", "نقره‌ای", "طلایی", "آبی دریایی"],
                    brand: "apple",
                    inStock: true,
                    discount: 17
                },
                { 
                    id: 6, 
                    name: "دوربین عکاسی کانن EOS 2000D با لنز 18-55mm", 
                    price: 18500000, 
                    oldPrice: 22000000, 
                    image: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "hot", 
                    rating: 4.4,
                    category: "دوربین و عکاسی",
                    description: "دوربین DSLR کانن EOS 2000D برای عکاسان مبتدی، با سنسور 24.1 مگاپیکسلی APS-C، پردازشگر DIGIC 4+، فیلم Full HD 1080p، Wi-Fi و NFC داخلی، نمایشگر 3 اینچی و حالت اتوماتیک هوشمند.",
                    brand: "canon",
                    inStock: true,
                    discount: 16
                },
                { 
                    id: 7, 
                    name: "گوشی شیائومی Redmi Note 12 پرو 256GB", 
                    price: 12500000, 
                    oldPrice: 14500000, 
                    image: "https://images.unsplash.com/photo-1598327105666-5b89351aff97?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "new", 
                    rating: 4.6,
                    category: "موبایل و تبلت",
                    description: "گوشی شیائومی Redmi Note 12 پرو با پردازنده Snapdragon 732G، حافظه 256 گیگابایت، رم 8 گیگابایت، باتری 5000mAh با شارژ 67 وات، دوربین 108 مگاپیکسلی اصلی و نمایشگر 6.67 اینچی AMOLED 120Hz.",
                    colors: ["مشکی", "آبی", "سبز"],
                    storage: ["128GB", "256GB"],
                    brand: "xiaomi",
                    inStock: true,
                    discount: 14
                },
                { 
                    id: 8, 
                    name: "کیف چرم مردانه برند Zara مدل 2023", 
                    price: 850000, 
                    oldPrice: 1200000, 
                    image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "discount", 
                    rating: 4.1,
                    category: "کیف و کفش",
                    description: "کیف چرم مردانه Zara مدل 2023 با طراحی مدرن، جنس چرم طبیعی، چندین محفظه برای کارت و اسناد، بند قابل تنظیم و مناسب برای استفاده روزمره و مسافرت.",
                    colors: ["مشکی", "قهوه‌ای", "خاکستری"],
                    brand: "zara",
                    inStock: true,
                    discount: 30
                }
            ],
            
            newProducts: [
                { 
                    id: 9, 
                    name: "ماشین لباسشویی ال جی 8 کیلوگرم مدل AI Direct Drive", 
                    price: 22500000, 
                    oldPrice: 26500000, 
                    image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "hot", 
                    rating: 4.5,
                    category: "خانه و آشپزخانه",
                    description: "ماشین لباسشویی ال جی 8 کیلوگرم با تکنولوژی AI Direct Drive، موتور مستقیم 10 سال گارانتی، سیستم تشخیص هوشمند نوع لباس، مصرف انرژی A+++، 6 حرکت شستشو و ۱۴ برنامه مختلف.",
                    brand: "lg",
                    inStock: true,
                    discount: 15
                },
                { 
                    id: 10, 
                    name: "هدفون اپل ایرپادز پرو نسل دوم", 
                    price: 2850000, 
                    oldPrice: 3200000, 
                    image: "https://images.unsplash.com/photo-1600294037681-c80b4cb5b434?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "new", 
                    rating: 4.9,
                    category: "کالای دیجیتال",
                    description: "هدفون اپل ایرپادز پرو نسل دوم با نویزکنسلینگ فعال و شفاف، تراشه H2، باتری 6 ساعته با قاب شارژ (تا 30 ساعت)، کیفیت صدای Spatial Audio و Adaptive EQ.",
                    colors: ["سفید"],
                    brand: "apple",
                    inStock: true,
                    discount: 11
                },
                { 
                    id: 11, 
                    name: "تلویزیون ال جی 55 اینچ 4K مدل OLED", 
                    price: 38500000, 
                    oldPrice: 45000000, 
                    image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "discount", 
                    rating: 4.7,
                    category: "کالای دیجیتال",
                    description: "تلویزیون ال جی 55 اینچ OLED 4K با پردازنده α9 Gen6 AI، سیستم صوتی Dolby Atmos، سیستم عامل webOS، HDR10 Pro، نرخ تازه‌سازی 120Hz و گیمینگ مد.",
                    brand: "lg",
                    inStock: true,
                    discount: 15
                },
                { 
                    id: 12, 
                    name: "کنسول بازی پلی‌استیشن 5 دیجیتال ادیشن", 
                    price: 28500000, 
                    oldPrice: 32000000, 
                    image: "https://images.unsplash.com/photo-1607853202273-797f1c22a38e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70", 
                    badge: "hot", 
                    rating: 4.8,
                    category: "کالای دیجیتال",
                    description: "کنسول بازی پلی‌استیشن 5 دیجیتال ادیشن با پردازنده AMD Zen 2، گرافیک RDNA 2، SSD 825GB فوق‌سریع، ریموت DualSense با فیدبک لمسی و سازگاری عقبرو با PS4.",
                    brand: "sony",
                    inStock: true,
                    discount: 11
                },
                { 
                    id: 13, 
                    name: "یخچال ساید بای ساید سامسونگ 660 لیتر", 
                    price: 45000000, 
                    oldPrice: 52000000, 
                    image: "https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "new", 
                    rating: 4.6,
                    category: "خانه و آشپزخانه",
                    description: "یخچال ساید بای ساید سامسونگ 660 لیتر با سیستم Twin Cooling Plus، یخساز اتوماتیک، صفحه لمسی دیجیتال، فیلتر ضد باکتری و طبقه‌بندی هوشمند.",
                    brand: "samsung",
                    inStock: true,
                    discount: 14
                },
                { 
                    id: 14, 
                    name: "تبلت اپل آیپد پرو 12.9 اینچ 256GB", 
                    price: 32000000, 
                    oldPrice: 38000000, 
                    image: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "new", 
                    rating: 4.9,
                    category: "موبایل و تبلت",
                    description: "تبلت اپل آیپد پرو 12.9 اینچ با تراشه M2، حافظه 256GB، نمایشگر Liquid Retina XDR، پشتیبانی از Apple Pencil 2، Magic Keyboard و دوربین 12 مگاپیکسلی.",
                    storage: ["256GB", "512GB", "1TB"],
                    brand: "apple",
                    inStock: true,
                    discount: 16
                },
                { 
                    id: 15, 
                    name: "دستگاه قهوه‌ساز دلمگی فیلیپس", 
                    price: 1850000, 
                    oldPrice: 2200000, 
                    image: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.3,
                    category: "خانه و آشپزخانه",
                    description: "دستگاه قهوه‌ساز دلمگی فیلیپس با سیستم AromaSwirl، مخزن آب 1.2 لیتری، فیلتر دائمی، گرم‌کن صفحه و قابلیت تهیه 4 فنجان قهوه به صورت همزمان.",
                    brand: "philips",
                    inStock: true,
                    discount: 16
                },
                { 
                    id: 16, 
                    name: "کت زمستانی مردانه برند Mango", 
                    price: 1250000, 
                    oldPrice: 1650000, 
                    image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.4,
                    category: "پوشاک مردانه",
                    description: "کت زمستانی مردانه Mango با پارچه ضد آب، آستر گرم، چند جیب، زیپ و دکمه دو لایه و طراحی مدرن مناسب برای فصول سرد سال.",
                    sizes: ["M", "L", "XL", "XXL"],
                    colors: ["مشکی", "خاکستری", "آبی تیره"],
                    brand: "mango",
                    inStock: true,
                    discount: 25
                }
            ],
            
            brands: [
                { name: "Samsung", logo: "https://upload.wikimedia.org/wikipedia/commons/2/24/Samsung_Logo.svg" },
                { name: "Apple", logo: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" },
                { name: "Nike", logo: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg" },
                { name: "Sony", logo: "https://upload.wikimedia.org/wikipedia/commons/c/ca/Sony_logo.svg" },
                { name: "LG", logo: "https://upload.wikimedia.org/wikipedia/commons/2/20/LG_symbol.svg" },
                { name: "Canon", logo: "https://upload.wikimedia.org/wikipedia/commons/5/5b/Canon_logo_2016.svg" },
                { name: "Xiaomi", logo: "https://upload.wikimedia.org/wikipedia/commons/2/29/Xiaomi_logo.svg" },
                { name: "Zara", logo: "https://upload.wikimedia.org/wikipedia/commons/f/fd/Zara_Logo.svg" },
                { name: "Adidas", logo: "https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg" },
                { name: "HP", logo: "https://upload.wikimedia.org/wikipedia/commons/2/29/HP_New_Logo_2D.svg" },
                { name: "Philips", logo: "https://upload.wikimedia.org/wikipedia/commons/4/41/Philips_logo.svg" },
                { name: "Mango", logo: "https://upload.wikimedia.org/wikipedia/commons/8/8b/Mango_%28brand%29_logo.svg" },
                { name: "Dell", logo: "https://upload.wikimedia.org/wikipedia/commons/1/18/Dell_logo_2016.svg" },
                { name: "Lenovo", logo: "https://upload.wikimedia.org/wikipedia/commons/c/cb/Lenovo_logo_2015.svg" }
            ],
            
            cities: [
                "کابل", "هرات", "قندهار", "مزارشریف", "جلال‌آباد", "غزنی", "بلخ", "پکتیا", 
                "کندز", "بادغیس", "تخار", "ننگرهار", "پروان", "فراه", "هلمند", "لوگر",
                "کاپیسا", "پکتیکا", "ارزگان", "نیمروز", "سمنگان", "بغلان", "بدخشان", "بامیان",
                "پنجشیر", "غور", "داکوندی", "زابل", "سربل", "خوست", "نورستان", "ورزگان",
                "پکتیا", "خوست", "کنر", "لغمان", "پروان", "میدان وردک", "غزنی", "کابل مرکز"
            ],
            
            testimonials: [
                {
                    name: "احمد رحیمی",
                    city: "کابل",
                    rating: 5,
                    text: "خریدی عالی از فروشگاه افغانستان داشتم. محصول به موقع و با بسته‌بندی عالی تحویل داده شد. کیفیت کالا دقیقاً مطابق توضیحات سایت بود. پشتیبانی نیز پاسخگوی سوالاتم بودند.",
                    date: "۲ هفته پیش",
                    product: "گوشی سامسونگ A54"
                },
                {
                    name: "زهرا محمدی",
                    city: "هرات",
                    rating: 4,
                    text: "پشتیبانی عالی و پاسخگویی سریع. محصول مورد نظر موجود نبود ولی کالای جایگزین با کیفیت بهتر و قیمت مناسب پیشنهاد دادند. ارسال به هرات تنها ۲ روز طول کشید.",
                    date: "۱ ماه پیش",
                    product: "هدفون سونی"
                },
                {
                    name: "علی کریمی",
                    city: "مزارشریف",
                    rating: 5,
                    text: "اولین بار از این سایت خرید کردم و کاملاً راضی هستم. قیمت‌ها مناسب و ارسال سریع بود. بسته‌بندی محکم و سالم به دستم رسید. حتماً خریدهای بعدی را نیز از اینجا انجام خواهم داد.",
                    date: "۳ روز پیش",
                    product: "لپ‌تاپ ایسوس"
                },
                {
                    name: "فاطمه حسینی",
                    city: "قندهار",
                    rating: 4,
                    text: "محصول درست همان چیزی بود که انتظار داشتم. بسته‌بندی محکم و سالم به دستم رسید. پرداخت در محل راحت بود و نیازی به پرداخت آنلاین نداشتم.",
                    date: "۲ ماه پیش",
                    product: "کفش نایک"
                },
                {
                    name: "محمد ناصری",
                    city: "جلال‌آباد",
                    rating: 5,
                    text: "بسیار راضی از خدمات فروشگاه. محصول با کیفیت بالا و قیمت مناسب دریافت کردم. پشتیبانی 24 ساعته واقعاً کمک‌کننده بود. به همه دوستانم این سایت را معرفی کرده‌ام.",
                    date: "۱ هفته پیش",
                    product: "ساعت اپل"
                },
                {
                    name: "سمیه احمدی",
                    city: "غزنی",
                    rating: 5,
                    text: "از خریدم بسیار راضی هستم. کیفیت محصول فوق العاده بود و بسته بندی بسیار حرفه‌ای. ارسال به غزنی فقط 3 روز طول کشید که برای شهرستان عالی است.",
                    date: "۴ روز پیش",
                    product: "کیف Zara"
                }
            ],
            
            blogPosts: [
                {
                    title: "چگونه گوشی موبایل مناسب را انتخاب کنیم؟ راهنمای کامل 2023",
                    excerpt: "راهنمای کامل برای انتخاب بهترین گوشی موبایل بر اساس نیاز، بودجه و کاربرد شما. مقایسه برندها، مشخصات فنی مهم و نکات خرید هوشمند.",
                    image: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    date: "۱۴۰۲/۰۵/۱۰",
                    readTime: "۸ دقیقه",
                    category: "الکترونیک"
                },
                {
                    title: "۱۰ نکته طلایی برای خرید اینترنتی امن در افغانستان",
                    excerpt: "راهکارهای مهم و ضروری برای خرید اینترنتی ایمن و جلوگیری از کلاهبرداری آنلاین در افغانستان. شناخت سایت‌های معتبر و روش‌های پرداخت امن.",
                    image: "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70",
                    date: "۱۴۰۲/۰۴/۲۸",
                    readTime: "۷ دقیقه",
                    category: "امنیت"
                },
                {
                    title: "نگهداری صحیح از لوازم خانگی برقی | افزایش عمر دستگاه‌ها",
                    excerpt: "نکات مهم و کاربردی برای افزایش عمر لوازم خانگی برقی و کاهش مصرف انرژی. راهنمای نگهداری از یخچال، ماشین لباسشویی، جاروبرقی و ...",
                    image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70",
                    date: "۱۴۰۲/۰۴/۱۵",
                    readTime: "۱۰ دقیقه",
                    category: "خانه داری"
                },
                {
                    title: "مد و پوشاک بهاری ۱۴۰۲ | ترندهای فصل جدید",
                    excerpt: "آخرین ترندهای مد و پوشاک بهاری ۱۴۰۲ برای مردان و زنان. رنگ‌های فصل، طرح‌های محبوب و استایل‌های روز دنیا.",
                    image: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    date: "۱۴۰۲/۰۳/۲۰",
                    readTime: "۶ دقیقه",
                    category: "مد و پوشاک"
                },
                {
                    title: "راهنمای خرید لپ‌تاپ برای دانشجویان و کارمندان",
                    excerpt: "مقایسه لپ‌تاپ‌های مختلف برای نیازهای آموزشی، کاری و تفریحی. انتخاب بر اساس پردازنده، رم، گرافیک و بودجه.",
                    image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    date: "۱۴۰۲/۰۵/۰۵",
                    readTime: "۹ دقیقه",
                    category: "الکترونیک"
                },
                {
                    title: "تغذیه سالم در افغانستان | مواد غذایی مفید و در دسترس",
                    excerpt: "معرفی مواد غذایی سالم، مقوی و در دسترس در بازار افغانستان. برنامه غذایی سالم برای خانواده‌های افغان.",
                    image: "https://images.unsplash.com/photo-1490818387583-1baba5e638af?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    date: "۱۴۰۲/۰۴/۱۰",
                    readTime: "۱۱ دقیقه",
                    category: "تغذیه"
                }
            ],
            
            userAddresses: [
                {
                    id: 1,
                    title: "آدرس منزل",
                    city: "کابل",
                    area: "کارته سخی",
                    address: "خیابان اول، کوچه پنجم، پلاک ۱۲، درب سوم",
                    postalCode: "1001",
                    phone: "07801234567",
                    isDefault: true
                },
                {
                    id: 2,
                    title: "آدرس محل کار",
                    city: "کابل",
                    area: "وزیر اکبرخان",
                    address: "خیابان سوم، ساختمان مرکزی تجارت، طبقه ۴، واحد ۴۰۱",
                    postalCode: "1002",
                    phone: "07901234567",
                    isDefault: false
                },
                {
                    id: 3,
                    title: "آدرس دفتر پدر",
                    city: "هرات",
                    area: "منطقه مرکزی",
                    address: "چهارراه مرکزی، بازار بزرگ، مغازه شماره ۱۵",
                    postalCode: "3001",
                    phone: "07001234567",
                    isDefault: false
                }
            ],
            
            userOrders: [
                {
                    id: "ORD-2023-001",
                    date: "۱۴۰۲/۰۵/۱۵",
                    items: 3,
                    total: 24500000,
                    status: "delivered",
                    products: [
                        { name: "گوشی سامسونگ A54", price: 18500000, quantity: 1 },
                        { name: "کاور گوشی", price: 150000, quantity: 2 },
                        { name: "گلس گوشی", price: 80000, quantity: 2 }
                    ]
                },
                {
                    id: "ORD-2023-002",
                    date: "۱۴۰۲/۰۵/۱۰",
                    items: 1,
                    total: 8500000,
                    status: "processing",
                    products: [
                        { name: "لپ‌تاپ ایسوس", price: 8500000, quantity: 1 }
                    ]
                },
                {
                    id: "ORD-2023-003",
                    date: "۱۴۰۲/۰۴/۲۸",
                    items: 2,
                    total: 12500000,
                    status: "shipped",
                    products: [
                        { name: "هدفون سونی", price: 3200000, quantity: 1 },
                        { name: "ساعت اپل", price: 9300000, quantity: 1 }
                    ]
                },
                {
                    id: "ORD-2023-004",
                    date: "۱۴۰۲/۰۴/۱۵",
                    items: 4,
                    total: 4500000,
                    status: "delivered",
                    products: [
                        { name: "کفش نایک", price: 1650000, quantity: 1 },
                        { name: "کیف Zara", price: 850000, quantity: 1 },
                        { name: "کتاب برنامه‌نویسی", price: 500000, quantity: 2 },
                        { name: "ماوس بی‌سیم", price: 300000, quantity: 1 }
                    ]
                },
                {
                    id: "ORD-2023-005",
                    date: "۱۴۰۲/۰۴/۰۵",
                    items: 1,
                    total: 18500000,
                    status: "cancelled",
                    products: [
                        { name: "دوربین کانن", price: 18500000, quantity: 1 }
                    ]
                }
            ],
            
            discounts: [
                {
                    id: 1,
                    title: "تخفیف ۳۰٪ پوشاک مردانه",
                    code: "MEN30",
                    percent: 30,
                    description: "تخفیف ویژه روی تمام محصولات پوشاک مردانه",
                    expireDate: "۱۴۰۲/۰۵/۳۰",
                    minPurchase: 500000
                },
                {
                    id: 2,
                    title: "تخفیف ۲۵٪ الکترونیک",
                    code: "TECH25",
                    percent: 25,
                    description: "تخفیف روی لوازم الکترونیکی و دیجیتال",
                    expireDate: "۱۴۰۲/۰۶/۱۵",
                    minPurchase: 1000000
                },
                {
                    id: 3,
                    title: "ارسال رایگان",
                    code: "FREESHIP",
                    percent: 0,
                    description: "ارسال رایگان به تمام نقاط افغانستان",
                    expireDate: "۱۴۰۲/۰۵/۲۵",
                    minPurchase: 500000
                },
                {
                    id: 4,
                    title: "تخفیف ۲۰٪ اولین خرید",
                    code: "FIRST20",
                    percent: 20,
                    description: "تخفیف ویژه برای اولین خرید از فروشگاه",
                    expireDate: "۱۴۰۲/۱۲/۲۹",
                    minPurchase: 200000
                },
                {
                    id: 5,
                    title: "تخفیف ۱۵٪ پایان فصل",
                    code: "SEASON15",
                    percent: 15,
                    description: "تخفیف روی محصولات فصل گذشته",
                    expireDate: "۱۴۰۲/۰۶/۱۰",
                    minPurchase: 300000
                },
                {
                    id: 6,
                    title: "تخفیف ۴۰٪ جشنواره بهار",
                    code: "SPRING40",
                    percent: 40,
                    description: "تخفیف ویژه جشنواره بهاری روی انتخاب‌شده‌ها",
                    expireDate: "۱۴۰۲/۰۶/۰۵",
                    minPurchase: 1000000
                }
            ],
            
            recommendedProducts: [
                { 
                    id: 17, 
                    name: "اسپیکر بلوتوث JBL Flip 5", 
                    price: 850000, 
                    oldPrice: 1100000, 
                    image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "hot", 
                    rating: 4.5,
                    category: "کالای دیجیتال"
                },
                { 
                    id: 18, 
                    name: "مبل راحتی 3 نفره مدرن", 
                    price: 12500000, 
                    oldPrice: 15500000, 
                    image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "new", 
                    rating: 4.7,
                    category: "خانه و آشپزخانه"
                },
                { 
                    id: 19, 
                    name: "کوله پشتی مدرسه دخترانه", 
                    price: 350000, 
                    oldPrice: 500000, 
                    image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.2,
                    category: "کیف و کفش"
                },
                { 
                    id: 20, 
                    name: "مخلوط کن فلر مدل 2023", 
                    price: 650000, 
                    oldPrice: 850000, 
                    image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "hot", 
                    rating: 4.3,
                    category: "خانه و آشپزخانه"
                },
                { 
                    id: 21, 
                    name: "سشوار حرفه ای فیلیپس", 
                    price: 450000, 
                    oldPrice: 650000, 
                    image: "https://images.unsplash.com/photo-1522338140262-f46f5913618a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "discount", 
                    rating: 4.4,
                    category: "زیبایی و سلامت"
                },
                { 
                    id: 22, 
                    name: "کیت آرایشی کامل زنانه", 
                    price: 1250000, 
                    oldPrice: 1850000, 
                    image: "https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80", 
                    badge: "new", 
                    rating: 4.6,
                    category: "زیبایی و سلامت"
                }
            ]
        };

        // وضعیت برنامه
        let appState = {
            cart: [],
            currentCity: "کابل",
            checkoutStep: 1,
            currentPage: "home",
            currentProduct: null,
            user: null,
            selectedAddress: null,
            selectedPayment: null,
            filters: {
                price: null,
                brand: null,
                rating: null,
                status: null
            },
            compareProducts: [],
            wishlist: []
        };

        // DOM Elements
        const elements = {
            // هدر
            locationBtn: document.getElementById('locationBtn'),
            currentCity: document.getElementById('currentCity'),
            searchInput: document.getElementById('searchInput'),
            searchBtn: document.getElementById('searchBtn'),
            cartBtn: document.getElementById('cartBtn'),
            cartCount: document.getElementById('cartCount'),
            accountBtn: document.getElementById('accountBtn'),
            mobileNavBtn: document.getElementById('mobileNavBtn'),
            navLinks: document.getElementById('navLinks'),
            
            // صفحات
            homePage: document.getElementById('homePage'),
            productPage: document.getElementById('productPage'),
            checkoutSection: document.getElementById('checkoutSection'),
            accountPage: document.getElementById('accountPage'),
            compareSection: document.getElementById('compareSection'),
            
            // مودال‌ها
            locationModal: document.getElementById('locationModal'),
            closeLocationModal: document.getElementById('closeLocationModal'),
            cartModal: document.getElementById('cartModal'),
            closeCartModal: document.getElementById('closeCartModal'),
            loginModal: document.getElementById('loginModal'),
            closeLoginModal: document.getElementById('closeLoginModal'),
            registerModal: document.getElementById('registerModal'),
            closeRegisterModal: document.getElementById('closeRegisterModal'),
            addressModal: document.getElementById('addressModal'),
            closeAddressModal: document.getElementById('closeAddressModal'),
            productQuickView: document.getElementById('productQuickView'),
            closeQuickView: document.getElementById('closeQuickView'),
            
            // محتوا
            categoriesGrid: document.getElementById('categoriesGrid'),
            featuredProducts: document.getElementById('featuredProducts'),
            newProducts: document.getElementById('newProducts'),
            brandsSlider: document.getElementById('brandsSlider'),
            testimonialsSlider: document.getElementById('testimonialsSlider'),
            blogGrid: document.getElementById('blogGrid'),
            discountCards: document.getElementById('discountCards'),
            recommendedSlider: document.getElementById('recommendedSlider'),
            compareTable: document.getElementById('compareTable'),
            backToTop: document.getElementById('backToTop'),
            
            // نوتیفیکیشن
            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notificationText')
        };

        // توابع عمومی
        function showNotification(message, type = "success") {
            elements.notificationText.textContent = message;
            elements.notification.style.background = type === "success" ? "var(--accent-color)" : 
                                                     type === "error" ? "#e74c3c" : 
                                                     type === "warning" ? "#f39c12" : 
                                                     type === "info" ? "var(--primary-color)" : 
                                                     "var(--accent-color)";
            elements.notification.classList.add('show');
            
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 3500);
        }

        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " افغانی";
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function showLoginModal() {
            closeModal('registerModal');
            openModal('loginModal');
        }

        function showRegisterModal() {
            closeModal('loginModal');
            openModal('registerModal');
        }

        // مدیریت سبد خرید
        function addToCart(productId) {
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            const existingItem = appState.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                appState.cart.push({
                    ...product,
                    quantity: 1,
                    selectedColor: product.colors ? product.colors[0] : null,
                    selectedSize: product.sizes ? product.sizes[0] : null,
                    selectedStorage: product.storage ? product.storage[0] : null
                });
            }
            
            updateCartDisplay();
            showNotification(`«${product.name.substring(0, 30)}...» به سبد خرید اضافه شد`, "success");
        }

        function removeFromCart(productId) {
            appState.cart = appState.cart.filter(item => item.id !== productId);
            updateCartDisplay();
            showNotification("محصول از سبد خرید حذف شد", "info");
        }

        function updateCartDisplay() {
            // به‌روزرسانی تعداد
            const totalItems = appState.cart.reduce((sum, item) => sum + item.quantity, 0);
            elements.cartCount.textContent = totalItems;
            
            // به‌روزرسانی مودال سبد خرید
            const cartItems = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            
            if (appState.cart.length === 0) {
                cartItems.innerHTML = `
                    <div style="text-align: center; padding: 40px 0;">
                        <i class="fas fa-shopping-cart" style="font-size: 3.5rem; color: #ddd; margin-bottom: 20px;"></i>
                        <p style="font-size: 1.1rem; color: #777; margin-bottom: 5px;">سبد خرید شما خالی است</p>
                        <p style="font-size: 0.9rem; color: #999; margin-bottom: 20px;">می‌توانید محصولات مورد نظر خود را به سبد خرید اضافه کنید</p>
                        <button class="btn btn-primary" style="padding: 12px 30px;" onclick="closeModal('cartModal')">
                            <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i>مشاهده محصولات
                        </button>
                    </div>
                `;
                cartSummary.style.display = 'none';
            } else {
                let cartHTML = '';
                let totalPrice = 0;
                
                appState.cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    totalPrice += itemTotal;
                    
                    cartHTML += `
                        <div style="border-bottom: 1px solid var(--border-color); padding: 20px 0;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div style="display: flex; align-items: flex-start; gap: 15px; flex: 1;">
                                    <img src="${item.image}" alt="${item.name}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; border: 1px solid #eee;">
                                    <div style="flex: 1;">
                                        <div style="font-size: 0.95rem; font-weight: 600; margin-bottom: 8px; color: var(--dark-color);">${item.name.substring(0, 45)}${item.name.length > 45 ? '...' : ''}</div>
                                        <div style="font-size: 0.85rem; color: var(--text-light); margin-bottom: 8px;">
                                            ${item.selectedColor ? `<span style="background: #f0f0f0; padding: 3px 8px; border-radius: 4px; margin-left: 5px;">رنگ: ${item.selectedColor}</span>` : ''}
                                            ${item.selectedSize ? `<span style="background: #f0f0f0; padding: 3px 8px; border-radius: 4px; margin-left: 5px;">سایز: ${item.selectedSize}</span>` : ''}
                                            ${item.selectedStorage ? `<span style="background: #f0f0f0; padding: 3px 8px; border-radius: 4px; margin-left: 5px;">حافظه: ${item.selectedStorage}</span>` : ''}
                                        </div>
                                        <div style="font-size: 0.9rem; color: var(--primary-color); font-weight: 700;">${formatPrice(item.price)}</div>
                                    </div>
                                </div>
                                <button onclick="removeFromCart(${item.id})" style="background: none; border: none; color: var(--danger-color); cursor: pointer; font-size: 1.5rem; padding: 0 10px; transition: var(--transition);" title="حذف از سبد">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <div style="display: flex; align-items: center; gap: 10px; background: #f5f5f5; padding: 8px 15px; border-radius: 8px;">
                                    <button onclick="updateCartQuantity(${item.id}, ${item.quantity - 1})" style="background: none; border: none; color: #777; cursor: pointer; font-size: 1.2rem; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: var(--transition);" title="کاهش">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <span style="font-weight: 600; min-width: 40px; text-align: center; font-size: 1.1rem;">${item.quantity}</span>
                                    <button onclick="updateCartQuantity(${item.id}, ${item.quantity + 1})" style="background: none; border: none; color: #777; cursor: pointer; font-size: 1.2rem; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: var(--transition);" title="افزایش">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div style="font-weight: 700; color: var(--dark-color); font-size: 1.1rem;">${formatPrice(itemTotal)}</div>
                            </div>
                        </div>
                    `;
                });
                
                cartItems.innerHTML = cartHTML;
                cartSummary.style.display = 'block';
                document.getElementById('cartTotalPrice').textContent = formatPrice(totalPrice);
            }
        }

        function updateCartQuantity(productId, quantity) {
            const item = appState.cart.find(item => item.id === productId);
            if (item) {
                if (quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    item.quantity = quantity;
                    updateCartDisplay();
                }
            }
        }

        // مدیریت صفحات
        function showHomePage() {
            hideAllPages();
            elements.homePage.style.display = 'block';
            appState.currentPage = "home";
            updateActiveNavLink('home');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showProductDetail(productId) {
            hideAllPages();
            elements.productPage.style.display = 'block';
            appState.currentPage = "product";
            
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            appState.currentProduct = product;
            
            const productHTML = `
                <div class="product-detail">
                    <div class="product-gallery">
                        <div class="main-image">
                            <img src="${product.image}" alt="${product.name}">
                        </div>
                        <div class="thumbnails">
                            <div class="thumbnail active">
                                <img src="${product.image}" alt="${product.name}">
                            </div>
                            <div class="thumbnail">
                                <img src="https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70" alt="تصویر ۲">
                            </div>
                            <div class="thumbnail">
                                <img src="https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70" alt="تصویر ۳">
                            </div>
                            <div class="thumbnail">
                                <img src="https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=70" alt="تصویر ۴">
                            </div>
                        </div>
                    </div>
                    
                    <div class="product-info-detail">
                        <h1>${product.name}</h1>
                        
                        <div class="product-rating-detail">
                            <div style="color: #f39c12; font-size: 1.2rem;">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                            </div>
                            <span style="color: var(--text-light); font-size: 0.95rem;">(${product.rating} از ۵ - ${Math.floor(Math.random() * 100) + 50} نظر)</span>
                            <span style="color: var(--text-light); font-size: 0.95rem;">دسته‌بندی: ${product.category}</span>
                            <span style="color: var(--text-light); font-size: 0.95rem;">برند: ${product.brand ? product.brand.charAt(0).toUpperCase() + product.brand.slice(1) : 'نامشخص'}</span>
                        </div>
                        
                        <div class="product-price-detail">
                            ${product.oldPrice ? `<span class="product-old-price">${formatPrice(product.oldPrice)}</span>` : ''}
                            <span>${formatPrice(product.price)}</span>
                            ${product.discount ? `<span style="background: var(--accent-color); color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.9rem; font-weight: 600; margin-right: 15px;">${product.discount}% تخفیف</span>` : ''}
                        </div>
                        
                        <div class="product-description">
                            ${product.description || "توضیحات کامل محصول در این قسمت نمایش داده می‌شود. این محصول با کیفیت بالا و گارانتی معتبر ارائه می‌شود."}
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 10px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-check-circle" style="color: var(--accent-color);"></i>
                                <span>موجود در انبار</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-shipping-fast" style="color: var(--primary-color);"></i>
                                <span>ارسال رایگان</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-shield-alt" style="color: var(--info-color);"></i>
                                <span>۷ روز گارانتی بازگشت</span>
                            </div>
                        </div>
                        
                        ${product.colors ? `
                        <div class="product-options">
                            <div class="option-group">
                                <div class="option-label">انتخاب رنگ:</div>
                                <div class="option-buttons" id="colorOptions">
                                    ${product.colors.map((color, index) => `
                                        <button class="option-btn ${index === 0 ? 'selected' : ''}" onclick="selectProductOption('color', '${color}')">${color}</button>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${product.sizes ? `
                        <div class="product-options">
                            <div class="option-group">
                                <div class="option-label">انتخاب سایز:</div>
                                <div class="option-buttons" id="sizeOptions">
                                    ${product.sizes.map((size, index) => `
                                        <button class="option-btn ${index === 0 ? 'selected' : ''}" onclick="selectProductOption('size', '${size}')">${size}</button>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        ${product.storage ? `
                        <div class="product-options">
                            <div class="option-group">
                                <div class="option-label">انتخاب حافظه:</div>
                                <div class="option-buttons" id="storageOptions">
                                    ${product.storage.map((storage, index) => `
                                        <button class="option-btn ${index === 0 ? 'selected' : ''}" onclick="selectProductOption('storage', '${storage}')">${storage}</button>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <div class="quantity-selector">
                            <div class="option-label" style="margin-bottom: 0;">تعداد:</div>
                            <button class="quantity-btn" onclick="updateProductQuantity(-1)"><i class="fas fa-minus"></i></button>
                            <span class="quantity-value" id="productQuantity">1</span>
                            <button class="quantity-btn" onclick="updateProductQuantity(1)"><i class="fas fa-plus"></i></button>
                        </div>
                        
                        <div class="product-actions-detail">
                            <button class="btn btn-buy" onclick="addToCartAndGo(${product.id})">
                                <i class="fas fa-cart-plus" style="margin-left: 8px;"></i> افزودن به سبد خرید
                            </button>
                            <button class="btn btn-primary" onclick="addToWishlist(${product.id})">
                                <i class="far fa-heart" style="margin-left: 8px;"></i> افزودن به علاقه‌مندی‌ها
                            </button>
                            <button class="btn btn-secondary" onclick="addToCompare(${product.id})">
                                <i class="fas fa-balance-scale" style="margin-left: 8px;"></i> مقایسه
                            </button>
                        </div>
                        
                        <div class="product-specs">
                            <h3>مشخصات فنی</h3>
                            <div class="specs-grid">
                                <div class="spec-item">
                                    <span class="spec-label">برند:</span>
                                    <span class="spec-value">${product.brand ? product.brand.charAt(0).toUpperCase() + product.brand.slice(1) : 'نامشخص'}</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">دسته‌بندی:</span>
                                    <span class="spec-value">${product.category}</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">گارانتی:</span>
                                    <span class="spec-value">۱۸ ماه گارانتی شرکتی</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">خدمات پس از فروش:</span>
                                    <span class="spec-value">دارد</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">کشور سازنده:</span>
                                    <span class="spec-value">${product.brand === 'apple' ? 'آمریکا' : product.brand === 'samsung' ? 'کره جنوبی' : product.brand === 'xiaomi' ? 'چین' : 'متفرقه'}</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">موجودی:</span>
                                    <span class="spec-value" style="color: var(--accent-color); font-weight: 700;">${product.inStock ? 'در انبار موجود است' : 'ناموجود'}</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">زمان تحویل:</span>
                                    <span class="spec-value">۲۴ تا ۷۲ ساعت در ${appState.currentCity}</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">امتیاز محصول:</span>
                                    <span class="spec-value">${product.rating} از ۵</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            elements.productPage.innerHTML = productHTML;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function selectProductOption(type, value) {
            if (!appState.currentProduct) return;
            
            // Update button selection
            document.querySelectorAll(`#${type}Options .option-btn`).forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Update in cart if product is in cart
            const cartItem = appState.cart.find(item => item.id === appState.currentProduct.id);
            if (cartItem) {
                cartItem[`selected${type.charAt(0).toUpperCase() + type.slice(1)}`] = value;
                updateCartDisplay();
            }
        }

        function updateProductQuantity(change) {
            const quantityElement = document.getElementById('productQuantity');
            let quantity = parseInt(quantityElement.textContent) + change;
            if (quantity < 1) quantity = 1;
            quantityElement.textContent = quantity;
        }

        function addToCartAndGo(productId) {
            const quantity = parseInt(document.getElementById('productQuantity').textContent);
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            // Get selected options
            const selectedColor = document.querySelector('#colorOptions .option-btn.selected')?.textContent;
            const selectedSize = document.querySelector('#sizeOptions .option-btn.selected')?.textContent;
            const selectedStorage = document.querySelector('#storageOptions .option-btn.selected')?.textContent;
            
            const existingItem = appState.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                appState.cart.push({
                    ...product,
                    quantity: quantity,
                    selectedColor: selectedColor || null,
                    selectedSize: selectedSize || null,
                    selectedStorage: selectedStorage || null
                });
            }
            
            updateCartDisplay();
            showNotification(`«${product.name.substring(0, 30)}...» به سبد خرید اضافه شد`, "success");
            openModal('cartModal');
        }

        function addToWishlist(productId) {
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            if (!appState.wishlist.find(item => item.id === productId)) {
                appState.wishlist.push(product);
                showNotification(`«${product.name.substring(0, 30)}...» به لیست علاقه‌مندی‌ها اضافه شد`, "success");
            } else {
                showNotification("این محصول قبلاً به علاقه‌مندی‌ها اضافه شده است", "info");
            }
        }

        function addToCompare(productId) {
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            if (appState.compareProducts.length >= 4) {
                showNotification("حداکثر ۴ محصول را می‌توانید مقایسه کنید", "warning");
                return;
            }
            
            if (!appState.compareProducts.find(item => item.id === productId)) {
                appState.compareProducts.push(product);
                showNotification(`«${product.name.substring(0, 30)}...» به لیست مقایسه اضافه شد`, "success");
                updateCompareButton();
            } else {
                showNotification("این محصول قبلاً به لیست مقایسه اضافه شده است", "info");
            }
        }

        function updateCompareButton() {
            const compareNavLink = document.querySelector('.nav-link[onclick="showCompareSection()"]');
            if (compareNavLink) {
                const count = appState.compareProducts.length;
                compareNavLink.innerHTML = `<i class="fas fa-balance-scale" style="margin-left: 8px;"></i>مقایسه ${count > 0 ? `(${count})` : ''}`;
            }
        }

        function showCompareSection() {
            hideAllPages();
            elements.compareSection.style.display = 'block';
            appState.currentPage = "compare";
            
            if (appState.compareProducts.length === 0) {
                elements.compareTable.innerHTML = `
                    <div style="text-align: center; padding: 60px 0;">
                        <i class="fas fa-balance-scale" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                        <h3 style="margin-bottom: 15px; color: var(--dark-color);">لیست مقایسه خالی است</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">می‌توانید محصولات مورد نظر خود را برای مقایسه اضافه کنید</p>
                        <button class="btn btn-primary" onclick="showHomePage()">
                            <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i>مشاهده محصولات
                        </button>
                    </div>
                `;
            } else {
                let compareHTML = `
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
                            <thead>
                                <tr>
                                    <th style="padding: 15px; background: #f9f9f9; border-bottom: 2px solid var(--border-color); text-align: center; min-width: 200px;"></th>
                `;
                
                // Headers
                appState.compareProducts.forEach(product => {
                    compareHTML += `
                        <th style="padding: 15px; background: #f9f9f9; border-bottom: 2px solid var(--border-color); text-align: center; min-width: 250px; vertical-align: top;">
                            <div style="position: relative;">
                                <button onclick="removeFromCompare(${product.id})" style="position: absolute; top: -10px; left: -10px; background: var(--danger-color); color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; font-size: 0.8rem;">×</button>
                                <img src="${product.image}" alt="${product.name}" style="width: 120px; height: 120px; object-fit: contain; margin-bottom: 10px;">
                                <div style="font-weight: 600; margin-bottom: 5px;">${product.name.substring(0, 40)}${product.name.length > 40 ? '...' : ''}</div>
                                <div style="color: var(--primary-color); font-weight: 700; margin-bottom: 10px;">${formatPrice(product.price)}</div>
                                <button class="btn" style="padding: 8px 15px; font-size: 0.85rem;" onclick="showProductDetail(${product.id})">مشاهده</button>
                            </div>
                        </th>
                    `;
                });
                
                compareHTML += `
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                // Rows
                const specs = [
                    { label: "برند", key: "brand" },
                    { label: "دسته‌بندی", key: "category" },
                    { label: "امتیاز", key: "rating" },
                    { label: "تخفیف", key: "discount" },
                    { label: "وضعیت", key: "inStock" }
                ];
                
                specs.forEach(spec => {
                    compareHTML += `
                        <tr>
                            <td style="padding: 12px 15px; border-bottom: 1px solid #eee; background: #f9f9f9; font-weight: 600;">${spec.label}</td>
                    `;
                    
                    appState.compareProducts.forEach(product => {
                        let value = "";
                        switch(spec.key) {
                            case "brand":
                                value = product.brand ? product.brand.charAt(0).toUpperCase() + product.brand.slice(1) : "نامشخص";
                                break;
                            case "category":
                                value = product.category;
                                break;
                            case "rating":
                                value = product.rating + " از ۵";
                                break;
                            case "discount":
                                value = product.discount ? product.discount + "%" : "ندارد";
                                break;
                            case "inStock":
                                value = product.inStock ? "موجود" : "ناموجود";
                                break;
                            default:
                                value = product[spec.key] || "ندارد";
                        }
                        
                        compareHTML += `
                            <td style="padding: 12px 15px; border-bottom: 1px solid #eee; text-align: center;">${value}</td>
                        `;
                    });
                    
                    compareHTML += `</tr>`;
                });
                
                compareHTML += `
                            </tbody>
                        </table>
                    </div>
                `;
                
                elements.compareTable.innerHTML = compareHTML;
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function removeFromCompare(productId) {
            appState.compareProducts = appState.compareProducts.filter(item => item.id !== productId);
            updateCompareButton();
            showCompareSection();
            showNotification("محصول از لیست مقایسه حذف شد", "info");
        }

        function closeCompareSection() {
            showHomePage();
        }

        function showCategory(categorySlug) {
            hideAllPages();
            elements.homePage.style.display = 'block';
            
            // Filter products by category
            const category = appData.categories.find(c => c.slug === categorySlug);
            if (!category) return;
            
            const filteredProducts = [...appData.featuredProducts, ...appData.newProducts]
                .filter(p => p.category === category.name);
            
            // Update products section
            const productsHTML = filteredProducts.map(product => {
                const badgeClass = product.badge === "discount" ? "discount" : 
                                  product.badge === "new" ? "new" : "hot";
                
                return `
                    <div class="product-card">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            <span class="product-badge ${badgeClass}">
                                ${product.badge === "discount" ? "تخفیف" : 
                                  product.badge === "new" ? "جدید" : "پرفروش"}
                            </span>
                            <div class="product-actions">
                                <button class="action-icon-btn" title="افزودن به علاقه‌مندی‌ها" onclick="addToWishlist(${product.id})">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon-btn" title="افزودن به مقایسه" onclick="addToCompare(${product.id})">
                                    <i class="fas fa-balance-scale"></i>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-title">${product.name}</div>
                            <div class="product-rating">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                <span style="color: #777; font-size: 0.85rem;">(${product.rating})</span>
                            </div>
                            <div class="product-price">
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <button class="add-to-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> افزودن به سبد
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('featuredProducts').innerHTML = productsHTML;
            document.getElementById('featuredProducts').parentElement.style.display = 'block';
            
            // Update section title
            document.querySelector('.products-section .section-title').textContent = `محصولات ${category.name}`;
            
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }

        function showQuickView(productId) {
            const allProducts = [...appData.featuredProducts, ...appData.newProducts, ...appData.recommendedProducts];
            const product = allProducts.find(p => p.id === productId);
            
            if (!product) return;
            
            const quickViewHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <img src="${product.image}" alt="${product.name}" style="width: 100%; border-radius: 10px;">
                    </div>
                    <div>
                        <h3 style="font-size: 1.3rem; margin-bottom: 10px; color: var(--dark-color);">${product.name}</h3>
                        <div style="color: #f39c12; margin-bottom: 15px;">
                            ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                            <span style="color: #777; font-size: 0.9rem;">(${product.rating})</span>
                        </div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color); margin-bottom: 20px;">
                            ${formatPrice(product.price)}
                            ${product.oldPrice ? `<span style="font-size: 1rem; color: #999; text-decoration: line-through; margin-right: 10px;">${formatPrice(product.oldPrice)}</span>` : ''}
                        </div>
                        <div style="font-size: 0.95rem; color: var(--text-light); margin-bottom: 25px; line-height: 1.6;">
                            ${product.description.substring(0, 150)}...
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="addToCart(${product.id}); closeModal('productQuickView');">
                                <i class="fas fa-cart-plus" style="margin-left: 8px;"></i> افزودن به سبد
                            </button>
                            <button class="btn" style="flex: 1;" onclick="showProductDetail(${product.id}); closeModal('productQuickView');">
                                <i class="fas fa-info-circle" style="margin-left: 8px;"></i> مشاهده جزئیات
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('quickViewContent').innerHTML = quickViewHTML;
            openModal('productQuickView');
        }

        function showAllCategories() {
            showNotification("همه دسته‌بندی‌ها نمایش داده می‌شوند", "info");
            // در حالت واقعی اینجا همه دسته‌بندی‌ها نمایش داده می‌شود
        }

        function showAllTestimonials() {
            showNotification("همه نظرات مشتریان نمایش داده می‌شوند", "info");
            // در حالت واقعی اینجا همه نظرات نمایش داده می‌شود
        }

        function showAccountPage(section = 'dashboard') {
            if (!appState.user) {
                openModal('loginModal');
                showNotification("لطفاً ابتدا وارد حساب کاربری خود شوید", "warning");
                return;
            }
            
            hideAllPages();
            elements.accountPage.style.display = 'block';
            appState.currentPage = "account";
            updateActiveNavLink('account');
            
            const accountHTML = `
                <div class="account-container">
                    <div class="account-sidebar">
                        <div class="account-user">
                            <div class="user-avatar">${appState.user.name.charAt(0)}</div>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem;">${appState.user.name}</div>
                                <div style="font-size: 0.9rem; color: var(--text-light); margin-top: 5px;">${appState.user.phone}</div>
                                <div style="font-size: 0.8rem; color: var(--text-light);">عضو از ${appState.user.joinDate || '۱۴۰۲/۰۱/۱۵'}</div>
                            </div>
                        </div>
                        
                        <ul class="account-menu">
                            <li><a href="#" class="${section === 'dashboard' ? 'active' : ''}" onclick="showAccountSection('dashboard')"><i class="fas fa-home"></i> داشبورد</a></li>
                            <li><a href="#" class="${section === 'orders' ? 'active' : ''}" onclick="showAccountSection('orders')"><i class="fas fa-shopping-bag"></i> سفارش‌های من <span style="background: var(--primary-color); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">${appData.userOrders.length}</span></a></li>
                            <li><a href="#" class="${section === 'addresses' ? 'active' : ''}" onclick="showAccountSection('addresses')"><i class="fas fa-map-marker-alt"></i> آدرس‌های من <span style="background: var(--accent-color); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">${appData.userAddresses.length}</span></a></li>
                            <li><a href="#" class="${section === 'wishlist' ? 'active' : ''}" onclick="showAccountSection('wishlist')"><i class="fas fa-heart"></i> علاقه‌مندی‌ها <span style="background: var(--danger-color); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">${appState.wishlist.length}</span></a></li>
                            <li><a href="#" class="${section === 'compare' ? 'active' : ''}" onclick="showAccountSection('compare')"><i class="fas fa-balance-scale"></i> مقایسه محصولات <span style="background: var(--warning-color); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">${appState.compareProducts.length}</span></a></li>
                            <li><a href="#" class="${section === 'profile' ? 'active' : ''}" onclick="showAccountSection('profile')"><i class="fas fa-user"></i> اطلاعات حساب</a></li>
                            <li><a href="#" class="${section === 'discounts' ? 'active' : ''}" onclick="showAccountSection('discounts')"><i class="fas fa-tags"></i> کوپن‌های من</a></li>
                            <li><a href="#" onclick="logout()" style="color: var(--danger-color);"><i class="fas fa-sign-out-alt"></i> خروج از حساب</a></li>
                        </ul>
                    </div>
                    
                    <div class="account-content">
                        <div id="accountDashboard" class="account-section ${section === 'dashboard' ? 'active' : ''}">
                            <h3 class="section-title-account">داشبورد حساب کاربری</h3>
                            <p style="color: var(--text-light); margin-bottom: 25px;">خوش آمدید ${appState.user.name} عزیز! از طریق این پنل می‌توانید سفارشات، آدرس‌ها و اطلاعات حساب خود را مدیریت کنید.</p>
                            
                            <div class="dashboard-stats">
                                <div class="stat-card">
                                    <div class="stat-value">${appData.userOrders.length}</div>
                                    <div class="stat-label">تعداد سفارش‌ها</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${appData.userAddresses.length}</div>
                                    <div class="stat-label">آدرس‌های ثبت شده</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${appState.wishlist.length}</div>
                                    <div class="stat-label">علاقه‌مندی‌ها</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${appData.discounts.length}</div>
                                    <div class="stat-label">کوپن‌های فعال</div>
                                </div>
                            </div>
                            
                            <h4 style="margin-bottom: 20px; font-size: 1.2rem; color: var(--dark-color);">آخرین سفارش‌ها</h4>
                            <div style="background: #f9f9f9; border-radius: 12px; padding: 20px; border: 1px solid #eee;">
                                ${appData.userOrders.slice(0, 3).map(order => {
                                    let statusClass = '';
                                    let statusText = '';
                                    switch(order.status) {
                                        case 'delivered':
                                            statusClass = 'status-delivered';
                                            statusText = 'تحویل شده';
                                            break;
                                        case 'processing':
                                            statusClass = 'status-processing';
                                            statusText = 'در حال پردازش';
                                            break;
                                        case 'shipped':
                                            statusClass = 'status-shipped';
                                            statusText = 'ارسال شده';
                                            break;
                                        case 'cancelled':
                                            statusClass = 'status-cancelled';
                                            statusText = 'لغو شده';
                                            break;
                                        default:
                                            statusClass = 'status-pending';
                                            statusText = 'در انتظار';
                                    }
                                    
                                    return `
                                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee;">
                                            <div>
                                                <div style="font-weight: 700; margin-bottom: 8px;">سفارش ${order.id}</div>
                                                <div style="font-size: 0.9rem; color: var(--text-light);">تاریخ: ${order.date} | ${order.items} قلم</div>
                                            </div>
                                            <div style="text-align: left;">
                                                <div style="font-weight: 700; color: var(--primary-color); margin-bottom: 8px;">${formatPrice(order.total)}</div>
                                                <span class="order-status ${statusClass}">${statusText}</span>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                                <div style="text-align: center; margin-top: 20px;">
                                    <a href="#" onclick="showAccountSection('orders')" style="color: var(--primary-color); font-size: 0.95rem; font-weight: 600; display: inline-flex; align-items: center; gap: 8px;">
                                        مشاهده همه سفارش‌ها
                                        <i class="fas fa-arrow-left"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <div id="accountOrders" class="account-section ${section === 'orders' ? 'active' : ''}">
                            <h3 class="section-title-account">سفارش‌های من</h3>
                            <div style="overflow-x: auto;">
                                <table class="orders-table">
                                    <thead>
                                        <tr>
                                            <th>شماره سفارش</th>
                                            <th>تاریخ</th>
                                            <th>تعداد اقلام</th>
                                            <th>مبلغ کل</th>
                                            <th>وضعیت</th>
                                            <th>عملیات</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${appData.userOrders.map(order => {
                                            let statusClass = '';
                                            let statusText = '';
                                            switch(order.status) {
                                                case 'delivered':
                                                    statusClass = 'status-delivered';
                                                    statusText = 'تحویل شده';
                                                    break;
                                                case 'processing':
                                                    statusClass = 'status-processing';
                                                    statusText = 'در حال پردازش';
                                                    break;
                                                case 'shipped':
                                                    statusClass = 'status-shipped';
                                                    statusText = 'ارسال شده';
                                                    break;
                                                case 'cancelled':
                                                    statusClass = 'status-cancelled';
                                                    statusText = 'لغو شده';
                                                    break;
                                                default:
                                                    statusClass = 'status-pending';
                                                    statusText = 'در انتظار';
                                            }
                                            
                                            return `
                                                <tr>
                                                    <td>${order.id}</td>
                                                    <td>${order.date}</td>
                                                    <td>${order.items}</td>
                                                    <td>${formatPrice(order.total)}</td>
                                                    <td>
                                                        <span class="order-status ${statusClass}">${statusText}</span>
                                                    </td>
                                                    <td>
                                                        <button class="btn" style="padding: 8px 15px; font-size: 0.85rem;" onclick="viewOrderDetails('${order.id}')">مشاهده</button>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div id="accountAddresses" class="account-section ${section === 'addresses' ? 'active' : ''}">
                            <h3 class="section-title-account">آدرس‌های من</h3>
                            <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                                <button class="btn btn-primary" onclick="openModal('addressModal')"><i class="fas fa-plus" style="margin-left: 8px;"></i> افزودن آدرس جدید</button>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                                ${appData.userAddresses.map(address => `
                                    <div class="address-card ${address.isDefault ? 'selected' : ''}" style="cursor: default;">
                                        <div class="address-title">
                                            <span>${address.title} ${address.isDefault ? '(پیش‌فرض)' : ''}</span>
                                            <div style="display: flex; gap: 8px;">
                                                <button class="action-icon-btn" style="width: 32px; height: 32px; font-size: 0.9rem;" title="ویرایش"><i class="fas fa-edit"></i></button>
                                                <button class="action-icon-btn" style="width: 32px; height: 32px; font-size: 0.9rem; background: #f8d7da; color: #721c24;" title="حذف"><i class="fas fa-trash"></i></button>
                                            </div>
                                        </div>
                                        <div class="address-details">
                                            <div><i class="fas fa-city" style="margin-left: 8px;"></i> ${address.city}، ${address.area}</div>
                                            <div><i class="fas fa-map-marker-alt" style="margin-left: 8px;"></i> ${address.address}</div>
                                            <div><i class="fas fa-mail-bulk" style="margin-left: 8px;"></i> کد پستی: ${address.postalCode}</div>
                                            <div><i class="fas fa-phone" style="margin-left: 8px;"></i> تلفن: ${address.phone}</div>
                                        </div>
                                        ${address.isDefault ? `
                                        <div style="margin-top: 15px;">
                                            <span class="order-status status-delivered">آدرس پیش‌فرض</span>
                                        </div>
                                        ` : `
                                        <div style="margin-top: 15px;">
                                            <button class="btn" style="padding: 8px 15px; font-size: 0.85rem;" onclick="setDefaultAddress(${address.id})">تنظیم به عنوان پیش‌فرض</button>
                                        </div>
                                        `}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div id="accountWishlist" class="account-section ${section === 'wishlist' ? 'active' : ''}">
                            <h3 class="section-title-account">لیست علاقه‌مندی‌ها</h3>
                            ${appState.wishlist.length === 0 ? `
                                <div style="text-align: center; padding: 60px 0; color: var(--text-light);">
                                    <i class="fas fa-heart" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                                    <p style="font-size: 1.1rem; margin-bottom: 10px;">لیست علاقه‌مندی‌های شما خالی است</p>
                                    <p style="margin-bottom: 25px;">می‌توانید محصولات مورد علاقه خود را به این لیست اضافه کنید</p>
                                    <button class="btn btn-primary" style="padding: 12px 30px;" onclick="showHomePage()">
                                        <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i>مشاهده محصولات
                                    </button>
                                </div>
                            ` : `
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                                    ${appState.wishlist.map(product => {
                                        const badgeClass = product.badge === "discount" ? "discount" : 
                                                          product.badge === "new" ? "new" : "hot";
                                        
                                        return `
                                            <div class="product-card">
                                                <div class="product-image">
                                                    <img src="${product.image}" alt="${product.name}">
                                                    <span class="product-badge ${badgeClass}">
                                                        ${product.badge === "discount" ? "تخفیف" : 
                                                          product.badge === "new" ? "جدید" : "پرفروش"}
                                                    </span>
                                                    <div class="product-actions">
                                                        <button class="action-icon-btn" title="حذف از علاقه‌مندی‌ها" onclick="removeFromWishlist(${product.id})">
                                                            <i class="fas fa-times"></i>
                                                        </button>
                                                        <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="product-info">
                                                    <div class="product-title">${product.name}</div>
                                                    <div class="product-rating">
                                                        ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                                        <span style="color: #777;">(${product.rating})</span>
                                                    </div>
                                                    <div class="product-price">
                                                        <span class="price-current">${formatPrice(product.price)}</span>
                                                        ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                                                    </div>
                                                    <button class="add-to-cart" onclick="addToCart(${product.id})">
                                                        <i class="fas fa-cart-plus"></i> افزودن به سبد
                                                    </button>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `}
                        </div>
                        
                        <div id="accountCompare" class="account-section ${section === 'compare' ? 'active' : ''}">
                            <h3 class="section-title-account">محصولات برای مقایسه</h3>
                            ${appState.compareProducts.length === 0 ? `
                                <div style="text-align: center; padding: 60px 0; color: var(--text-light);">
                                    <i class="fas fa-balance-scale" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                                    <p style="font-size: 1.1rem; margin-bottom: 10px;">لیست مقایسه شما خالی است</p>
                                    <p style="margin-bottom: 25px;">می‌توانید محصولات مورد نظر خود را برای مقایسه اضافه کنید</p>
                                    <button class="btn btn-primary" style="padding: 12px 30px;" onclick="showHomePage()">
                                        <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i>مشاهده محصولات
                                    </button>
                                </div>
                            ` : `
                                <div style="margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <span>${appState.compareProducts.length} محصول برای مقایسه انتخاب شده است</span>
                                    </div>
                                    <div>
                                        <button class="btn btn-primary" onclick="showCompareSection()">
                                            <i class="fas fa-balance-scale" style="margin-left: 8px;"></i>مشاهده مقایسه
                                        </button>
                                        <button class="btn btn-danger" onclick="clearCompareList()" style="margin-right: 10px;">
                                            <i class="fas fa-trash" style="margin-left: 8px;"></i>پاک کردن لیست
                                        </button>
                                    </div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                                    ${appState.compareProducts.map(product => {
                                        return `
                                            <div class="product-card">
                                                <div class="product-image">
                                                    <img src="${product.image}" alt="${product.name}">
                                                    <div class="product-actions">
                                                        <button class="action-icon-btn" title="حذف از مقایسه" onclick="removeFromCompare(${product.id})">
                                                            <i class="fas fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="product-info">
                                                    <div class="product-title">${product.name}</div>
                                                    <div class="product-price">
                                                        <span class="price-current">${formatPrice(product.price)}</span>
                                                    </div>
                                                    <button class="add-to-cart" onclick="showProductDetail(${product.id})">
                                                        <i class="fas fa-eye"></i> مشاهده جزئیات
                                                    </button>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `}
                        </div>
                        
                        <div id="accountProfile" class="account-section ${section === 'profile' ? 'active' : ''}">
                            <h3 class="section-title-account">اطلاعات حساب کاربری</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">نام و نام خانوادگی</label>
                                    <input type="text" class="form-input" value="${appState.user.name}">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">شماره موبایل</label>
                                    <input type="text" class="form-input" value="${appState.user.phone}" disabled>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ایمیل</label>
                                <input type="email" class="form-input" value="${appState.user.email || ''}">
                            </div>
                            <div class="form-group">
                                <label class="form-label">کد ملی</label>
                                <input type="text" class="form-input" value="${appState.user.nationalId || ''}">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">تاریخ تولد</label>
                                    <input type="text" class="form-input" value="${appState.user.birthDate || ''}" placeholder="۱۳۷۰/۰۱/۰۱">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">جنسیت</label>
                                    <select class="form-select">
                                        <option ${appState.user.gender === 'male' ? 'selected' : ''}>مرد</option>
                                        <option ${appState.user.gender === 'female' ? 'selected' : ''}>زن</option>
                                        <option ${!appState.user.gender ? 'selected' : ''}>ترجیح می‌دهم نگویم</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="margin-top: 10px; padding: 12px 30px;">ذخیره تغییرات</button>
                        </div>
                        
                        <div id="accountDiscounts" class="account-section ${section === 'discounts' ? 'active' : ''}">
                            <h3 class="section-title-account">کوپن‌های تخفیف من</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                                ${appData.discounts.map(discount => `
                                    <div class="discount-card">
                                        <div class="discount-percent">${discount.percent}%</div>
                                        <h4 style="font-size: 1.2rem; margin-bottom: 10px;">${discount.title}</h4>
                                        <p style="color: var(--text-light); margin-bottom: 15px; font-size: 0.9rem;">${discount.description}</p>
                                        <div style="background: #f5f5f5; padding: 10px; border-radius: 6px; margin-bottom: 15px; text-align: center;">
                                            <div style="font-size: 0.85rem; color: #777; margin-bottom: 5px;">کد تخفیف</div>
                                            <div style="font-family: monospace; font-size: 1.1rem; font-weight: 700; color: var(--primary-color);">${discount.code}</div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--text-light);">
                                            <span>حداقل خرید: ${formatPrice(discount.minPurchase)}</span>
                                            <span>انقضا: ${discount.expireDate}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            elements.accountPage.innerHTML = accountHTML;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function removeFromWishlist(productId) {
            appState.wishlist = appState.wishlist.filter(item => item.id !== productId);
            showAccountPage('wishlist');
            showNotification("محصول از لیست علاقه‌مندی‌ها حذف شد", "info");
        }

        function clearCompareList() {
            appState.compareProducts = [];
            updateCompareButton();
            showAccountPage('compare');
            showNotification("لیست مقایسه پاک شد", "info");
        }

        function setDefaultAddress(addressId) {
            appData.userAddresses.forEach(address => {
                address.isDefault = address.id === addressId;
            });
            showAccountPage('addresses');
            showNotification("آدرس پیش‌فرض تغییر یافت", "success");
        }

        function viewOrderDetails(orderId) {
            const order = appData.userOrders.find(o => o.id === orderId);
            if (!order) return;
            
            showNotification(`جزئیات سفارش ${orderId} نمایش داده می‌شود`, "info");
            // در حالت واقعی اینجا جزئیات سفارش نمایش داده می‌شود
        }

        function showAccountSection(section) {
            // Update menu
            document.querySelectorAll('.account-menu a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update sections
            document.querySelectorAll('.account-section').forEach(sec => {
                sec.classList.remove('active');
            });
            document.getElementById(`account${section.charAt(0).toUpperCase() + section.slice(1)}`).classList.add('active');
        }

        function hideAllPages() {
            elements.homePage.style.display = 'none';
            elements.productPage.style.display = 'none';
            elements.checkoutSection.style.display = 'none';
            elements.accountPage.style.display = 'none';
            elements.compareSection.style.display = 'none';
        }

        function updateActiveNavLink(page) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (page === 'home') {
                document.querySelector('.nav-link[onclick="showHomePage()"]').classList.add('active');
            } else if (page === 'account') {
                // حساب کاربری در منوی اصلی نیست
            }
        }

        // فیلتر محصولات
        function filterByPrice(priceRange) {
            appState.filters.price = priceRange;
            updateFilterChips();
            applyFilters();
            showNotification(`فیلتر قیمت اعمال شد: ${getPriceRangeText(priceRange)}`, "info");
        }

        function filterByBrand(brand) {
            appState.filters.brand = brand;
            updateFilterChips();
            applyFilters();
            showNotification(`فیلتر برند اعمال شد: ${brand.charAt(0).toUpperCase() + brand.slice(1)}`, "info");
        }

        function filterByRating(rating) {
            appState.filters.rating = rating;
            updateFilterChips();
            applyFilters();
            showNotification(`فیلتر امتیاز اعمال شد: ${rating} ستاره به بالا`, "info");
        }

        function filterByStatus(status) {
            appState.filters.status = status;
            updateFilterChips();
            applyFilters();
            showNotification(`فیلتر وضعیت اعمال شد: ${getStatusText(status)}`, "info");
        }

        function resetFilters() {
            appState.filters = {
                price: null,
                brand: null,
                rating: null,
                status: null
            };
            updateFilterChips();
            applyFilters();
            showNotification("همه فیلترها حذف شدند", "info");
        }

        function updateFilterChips() {
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            
            if (appState.filters.price) {
                document.querySelector(`.filter-chip[onclick="filterByPrice('${appState.filters.price}')"]`)?.classList.add('active');
            }
            if (appState.filters.brand) {
                document.querySelector(`.filter-chip[onclick="filterByBrand('${appState.filters.brand}')"]`)?.classList.add('active');
            }
            if (appState.filters.rating) {
                document.querySelector(`.filter-chip[onclick="filterByRating(${appState.filters.rating})"]`)?.classList.add('active');
            }
            if (appState.filters.status) {
                document.querySelector(`.filter-chip[onclick="filterByStatus('${appState.filters.status}')"]`)?.classList.add('active');
            }
        }

        function getPriceRangeText(range) {
            switch(range) {
                case 'under500k': return 'زیر ۵۰۰ هزار';
                case '500k-2m': return '۵۰۰ هزار تا ۲ میلیون';
                case '2m-5m': return '۲ تا ۵ میلیون';
                case 'over5m': return 'بالای ۵ میلیون';
                default: return range;
            }
        }

        function getStatusText(status) {
            switch(status) {
                case 'discount': return 'تخفیف‌دار';
                case 'new': return 'جدید';
                case 'bestseller': return 'پرفروش';
                case 'instock': return 'موجود';
                default: return status;
            }
        }

        function applyFilters() {
            const allProducts = [...appData.featuredProducts, ...appData.newProducts];
            let filteredProducts = [...allProducts];
            
            // Apply price filter
            if (appState.filters.price) {
                filteredProducts = filteredProducts.filter(product => {
                    switch(appState.filters.price) {
                        case 'under500k': return product.price < 500000;
                        case '500k-2m': return product.price >= 500000 && product.price <= 2000000;
                        case '2m-5m': return product.price >= 2000000 && product.price <= 5000000;
                        case 'over5m': return product.price > 5000000;
                        default: return true;
                    }
                });
            }
            
            // Apply brand filter
            if (appState.filters.brand) {
                filteredProducts = filteredProducts.filter(product => product.brand === appState.filters.brand);
            }
            
            // Apply rating filter
            if (appState.filters.rating) {
                filteredProducts = filteredProducts.filter(product => product.rating >= appState.filters.rating);
            }
            
            // Apply status filter
            if (appState.filters.status) {
                filteredProducts = filteredProducts.filter(product => {
                    switch(appState.filters.status) {
                        case 'discount': return product.discount > 0;
                        case 'new': return product.badge === 'new';
                        case 'bestseller': return product.badge === 'hot';
                        case 'instock': return product.inStock === true;
                        default: return true;
                    }
                });
            }
            
            // Update featured products with filtered results
            const productsHTML = filteredProducts.map(product => {
                const badgeClass = product.badge === "discount" ? "discount" : 
                                  product.badge === "new" ? "new" : "hot";
                
                return `
                    <div class="product-card">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            <span class="product-badge ${badgeClass}">
                                ${product.badge === "discount" ? "تخفیف" : 
                                  product.badge === "new" ? "جدید" : "پرفروش"}
                            </span>
                            <div class="product-actions">
                                <button class="action-icon-btn" title="افزودن به علاقه‌مندی‌ها" onclick="addToWishlist(${product.id})">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon-btn" title="افزودن به مقایسه" onclick="addToCompare(${product.id})">
                                    <i class="fas fa-balance-scale"></i>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-title">${product.name}</div>
                            <div class="product-rating">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                <span style="color: #777; font-size: 0.85rem;">(${product.rating})</span>
                            </div>
                            <div class="product-price">
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <button class="add-to-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> افزودن به سبد
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('featuredProducts').innerHTML = productsHTML || `
                <div style="grid-column: 1 / -1; text-align: center; padding: 60px 0;">
                    <i class="fas fa-search" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 15px; color: var(--dark-color);">محصولی یافت نشد</h3>
                    <p style="color: var(--text-light); margin-bottom: 25px;">هیچ محصولی با فیلترهای انتخاب‌شده مطابقت ندارد</p>
                    <button class="btn btn-primary" onclick="resetFilters()">
                        <i class="fas fa-times" style="margin-left: 8px;"></i>حذف فیلترها
                    </button>
                </div>
            `;
        }

        // فرآیند خرید
        function startCheckout() {
            if (appState.cart.length === 0) {
                showNotification("سبد خرید شما خالی است", "warning");
                return;
            }
            
            if (!appState.user) {
                openModal('loginModal');
                showNotification("لطفاً ابتدا وارد حساب کاربری خود شوید", "warning");
                return;
            }
            
            closeModal('cartModal');
            hideAllPages();
            elements.checkoutSection.style.display = 'block';
            appState.currentPage = "checkout";
            appState.checkoutStep = 1;
            
            loadCheckoutStep1();
            updateCheckoutSteps();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function loadCheckoutStep1() {
            const step1HTML = `
                <div class="checkout-step active" id="step1">
                    <h3 class="step-title-main">اطلاعات ارسال</h3>
                    <p style="color: var(--text-light); margin-bottom: 25px;">لطفاً آدرس ارسال سفارش خود را انتخاب یا وارد کنید.</p>
                    
                    <div class="form-group">
                        <label class="form-label">انتخاب آدرس ارسال</label>
                        ${appData.userAddresses.map(address => `
                            <div class="address-card ${address.isDefault ? 'selected' : ''}" onclick="selectAddress(${address.id})">
                                <div class="address-title">
                                    ${address.title} ${address.isDefault ? '(پیش‌فرض)' : ''}
                                    <i class="fas fa-check-circle" style="color: var(--accent-color); ${!address.isDefault ? 'display: none;' : ''}"></i>
                                </div>
                                <div class="address-details">
                                    <div><i class="fas fa-city" style="margin-left: 8px;"></i> ${address.city}، ${address.area}</div>
                                    <div><i class="fas fa-map-marker-alt" style="margin-left: 8px;"></i> ${address.address}</div>
                                    <div><i class="fas fa-phone" style="margin-left: 8px;"></i> تلفن: ${address.phone}</div>
                                </div>
                            </div>
                        `).join('')}
                        
                        <div style="text-align: center; margin: 25px 0;">
                            <button class="btn btn-primary" onclick="openModal('addressModal')">
                                <i class="fas fa-plus" style="margin-left: 8px;"></i> افزودن آدرس جدید
                            </button>
                        </div>
                    </div>
                    
                    <div class="checkout-actions">
                        <button class="btn btn-secondary" onclick="showHomePage()">بازگشت به فروشگاه</button>
                        <button class="btn btn-primary" onclick="nextStep()">ادامه فرآیند خرید</button>
                    </div>
                </div>
            `;
            
            document.getElementById('checkoutSection').querySelector('.checkout-content').innerHTML = step1HTML;
            
            // Set default address
            const defaultAddress = appData.userAddresses.find(a => a.isDefault);
            if (defaultAddress) {
                appState.selectedAddress = defaultAddress;
            }
        }

        function selectAddress(addressId) {
            const address = appData.userAddresses.find(a => a.id === addressId);
            if (address) {
                appState.selectedAddress = address;
                
                // Update UI
                document.querySelectorAll('.address-card').forEach(card => {
                    card.classList.remove('selected');
                });
                event.target.closest('.address-card').classList.add('selected');
                
                showNotification(`آدرس "${address.title}" انتخاب شد`, "success");
            }
        }

        function nextStep() {
            if (appState.checkoutStep === 1 && !appState.selectedAddress) {
                showNotification("لطفاً یک آدرس انتخاب کنید", "warning");
                return;
            }
            
            if (appState.checkoutStep === 2 && !appState.selectedPayment) {
                showNotification("لطفاً یک روش پرداخت انتخاب کنید", "warning");
                return;
            }
            
            if (appState.checkoutStep < 3) {
                appState.checkoutStep++;
                updateCheckoutSteps();
                loadCheckoutStep(appState.checkoutStep);
            }
        }

        function prevStep() {
            if (appState.checkoutStep > 1) {
                appState.checkoutStep--;
                updateCheckoutSteps();
                loadCheckoutStep(appState.checkoutStep);
            }
        }

        function loadCheckoutStep(step) {
            const container = document.getElementById('checkoutSection').querySelector('.checkout-content');
            
            if (step === 2) {
                const step2HTML = `
                    <div class="checkout-step active" id="step2">
                        <h3 class="step-title-main">روش پرداخت</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">لطفاً روش پرداخت مورد نظر خود را انتخاب کنید.</p>
                        
                        <div class="form-group">
                            <label class="form-label">انتخاب روش پرداخت</label>
                            <div class="payment-method ${!appState.selectedPayment || appState.selectedPayment === 'cash' ? 'selected' : ''}" onclick="selectPayment('cash')">
                                <div class="payment-title">
                                    <i class="fas fa-money-bill-wave"></i>
                                    <span>پرداخت در محل</span>
                                </div>
                                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 8px; line-height: 1.5;">پرداخت وجه هنگام دریافت کالا. مناسب برای کسانی که تمایل به پرداخت آنلاین ندارند.</p>
                            </div>
                            <div class="payment-method ${appState.selectedPayment === 'online' ? 'selected' : ''}" onclick="selectPayment('online')">
                                <div class="payment-title">
                                    <i class="fas fa-credit-card"></i>
                                    <span>پرداخت آنلاین</span>
                                </div>
                                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 8px; line-height: 1.5;">پرداخت امن از طریق درگاه بانکی. سفارش شما سریع‌تر پردازش می‌شود.</p>
                            </div>
                            <div class="payment-method ${appState.selectedPayment === 'wallet' ? 'selected' : ''}" onclick="selectPayment('wallet')">
                                <div class="payment-title">
                                    <i class="fas fa-wallet"></i>
                                    <span>پرداخت از کیف پول</span>
                                </div>
                                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 8px; line-height: 1.5;">پرداخت از موجودی کیف پول فروشگاه. سریع و آسان.</p>
                            </div>
                        </div>
                        
                        <div class="checkout-actions">
                            <button class="btn btn-secondary" onclick="prevStep()">بازگشت</button>
                            <button class="btn btn-primary" onclick="nextStep()">ادامه</button>
                        </div>
                    </div>
                `;
                container.innerHTML = step2HTML;
                
                if (!appState.selectedPayment) {
                    appState.selectedPayment = 'cash';
                }
                
            } else if (step === 3) {
                const totalPrice = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const shippingCost = totalPrice > 500000 ? 0 : 50000;
                const finalTotal = totalPrice + shippingCost;
                
                const step3HTML = `
                    <div class="checkout-step active" id="step3">
                        <h3 class="step-title-main">بررسی نهایی و ثبت سفارش</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">لطفاً اطلاعات زیر را بررسی و در صورت صحت، سفارش خود را ثبت کنید.</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                            <div>
                                <h4 style="margin-bottom: 15px; font-size: 1.1rem; color: var(--dark-color);">آدرس ارسال</h4>
                                <div style="background: #f9f9f9; padding: 20px; border-radius: 12px; border: 1px solid #eee;">
                                    <div style="font-weight: 700; margin-bottom: 10px; color: var(--dark-color);">${appState.selectedAddress.title}</div>
                                    <div style="font-size: 0.95rem; color: var(--text-light); line-height: 1.6;">
                                        <div><i class="fas fa-city" style="margin-left: 8px;"></i> ${appState.selectedAddress.city}، ${appState.selectedAddress.area}</div>
                                        <div><i class="fas fa-map-marker-alt" style="margin-left: 8px;"></i> ${appState.selectedAddress.address}</div>
                                        <div><i class="fas fa-phone" style="margin-left: 8px;"></i> تلفن: ${appState.selectedAddress.phone}</div>
                                    </div>
                                    <button class="btn" style="margin-top: 15px; padding: 8px 15px; font-size: 0.85rem;" onclick="prevStep()">تغییر آدرس</button>
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="margin-bottom: 15px; font-size: 1.1rem; color: var(--dark-color);">روش پرداخت</h4>
                                <div style="background: #f9f9f9; padding: 20px; border-radius: 12px; border: 1px solid #eee;">
                                    <div style="font-weight: 700; margin-bottom: 10px; color: var(--dark-color);">
                                        ${appState.selectedPayment === 'cash' ? 'پرداخت در محل' : 
                                          appState.selectedPayment === 'online' ? 'پرداخت آنلاین' : 'پرداخت از کیف پول'}
                                    </div>
                                    <div style="font-size: 0.95rem; color: var(--text-light); margin-bottom: 15px;">
                                        ${appState.selectedPayment === 'cash' ? 'پرداخت وجه هنگام دریافت کالا توسط مأمور پست' : 
                                          appState.selectedPayment === 'online' ? 'پرداخت امن از طریق درگاه بانکی' : 'پرداخت از موجودی کیف پول فروشگاه'}
                                    </div>
                                    <button class="btn" style="padding: 8px 15px; font-size: 0.85rem;" onclick="prevStep()">تغییر روش پرداخت</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-summary">
                            <h4 style="margin-bottom: 20px; font-size: 1.1rem; color: var(--dark-color);">خلاصه سفارش</h4>
                            ${appState.cart.map(item => `
                                <div class="order-item">
                                    <div>
                                        <div style="font-weight: 600; margin-bottom: 5px;">${item.name.substring(0, 40)}${item.name.length > 40 ? '...' : ''}</div>
                                        <div style="font-size: 0.9rem; color: var(--text-light);">
                                            ${item.quantity} عدد × ${formatPrice(item.price)}
                                        </div>
                                    </div>
                                    <div style="font-weight: 700;">${formatPrice(item.price * item.quantity)}</div>
                                </div>
                            `).join('')}
                            <div class="order-item">
                                <span>هزینه ارسال</span>
                                <span>${shippingCost === 0 ? 'رایگان' : formatPrice(shippingCost)}</span>
                            </div>
                            <div class="order-total">
                                <span>مبلغ قابل پرداخت</span>
                                <span>${formatPrice(finalTotal)}</span>
                            </div>
                        </div>
                        
                        <div class="form-group" style="margin-top: 30px;">
                            <label class="form-label">توضیحات سفارش (اختیاری)</label>
                            <textarea class="form-input" id="orderNotes" rows="4" placeholder="در صورت نیاز می‌توانید توضیحاتی برای سفارش خود بنویسید. مثال: زمان تحویل خاص، بسته‌بندی خاص، هدیه و ..."></textarea>
                        </div>
                        
                        <div style="margin: 25px 0; padding: 20px; background: var(--primary-light); border-radius: 10px; border-right: 4px solid var(--primary-color);">
                            <div style="display: flex; align-items: flex-start; gap: 15px;">
                                <i class="fas fa-info-circle" style="color: var(--primary-color); font-size: 1.2rem; margin-top: 2px;"></i>
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark-color);">تأیید نهایی سفارش</div>
                                    <div style="font-size: 0.95rem; color: var(--text-light); line-height: 1.6;">با کلیک روی دکمه «تایید و ثبت سفارش»، شما موافقت خود را با <a href="#" style="color: var(--primary-color);">قوانین و مقررات</a> فروشگاه اعلام می‌کنید.</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="checkout-actions">
                            <button class="btn btn-secondary" onclick="prevStep()">بازگشت</button>
                            <button class="btn btn-success" onclick="completeOrder()">
                                <i class="fas fa-check-circle" style="margin-left: 8px;"></i>تایید و ثبت سفارش
                            </button>
                        </div>
                    </div>
                `;
                container.innerHTML = step3HTML;
            }
        }

        function selectPayment(method) {
            appState.selectedPayment = method;
            
            // Update UI
            document.querySelectorAll('.payment-method').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.payment-method').classList.add('selected');
            
            showNotification(`روش پرداخت "${method === 'cash' ? 'پرداخت در محل' : method === 'online' ? 'پرداخت آنلاین' : 'کیف پول'}" انتخاب شد`, "success");
        }

        function updateCheckoutSteps() {
            // Create steps HTML if not exists
            if (!document.querySelector('.checkout-steps')) {
                const stepsHTML = `
                    <div class="checkout-steps">
                        <div class="step ${appState.checkoutStep === 1 ? 'active' : ''} ${appState.checkoutStep > 1 ? 'completed' : ''}" data-step="1">
                            <div class="step-number">۱</div>
                            <div class="step-title">اطلاعات ارسال</div>
                            <div class="step-line"></div>
                        </div>
                        <div class="step ${appState.checkoutStep === 2 ? 'active' : ''} ${appState.checkoutStep > 2 ? 'completed' : ''}" data-step="2">
                            <div class="step-number">۲</div>
                            <div class="step-title">روش پرداخت</div>
                            <div class="step-line"></div>
                        </div>
                        <div class="step ${appState.checkoutStep === 3 ? 'active' : ''}" data-step="3">
                            <div class="step-number">۳</div>
                            <div class="step-title">بررسی نهایی</div>
                            <div class="step-line"></div>
                        </div>
                    </div>
                `;
                
                document.getElementById('checkoutSection').innerHTML = `
                    ${stepsHTML}
                    <div class="checkout-content"></div>
                `;
            } else {
                // Update steps UI
                document.querySelectorAll('.step').forEach(step => {
                    const stepNum = parseInt(step.getAttribute('data-step'));
                    
                    step.classList.remove('active', 'completed');
                    
                    if (stepNum < appState.checkoutStep) {
                        step.classList.add('completed');
                    } else if (stepNum === appState.checkoutStep) {
                        step.classList.add('active');
                    }
                });
            }
        }

        function completeOrder() {
            const orderNotes = document.getElementById('orderNotes')?.value || '';
            
            // Calculate totals
            const totalPrice = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shippingCost = totalPrice > 500000 ? 0 : 50000;
            const finalTotal = totalPrice + shippingCost;
            
            // Create order
            const newOrder = {
                id: `ORD-2023-${String(appData.userOrders.length + 1).padStart(3, '0')}`,
                date: new Date().toLocaleDateString('fa-IR'),
                items: appState.cart.reduce((sum, item) => sum + item.quantity, 0),
                total: finalTotal,
                status: 'processing',
                address: appState.selectedAddress,
                payment: appState.selectedPayment,
                notes: orderNotes,
                products: appState.cart.map(item => ({
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity
                }))
            };
            
            appData.userOrders.unshift(newOrder);
            
            // Show success message
            showNotification(`سفارش ${newOrder.id} با موفقیت ثبت شد! مبلغ ${formatPrice(finalTotal)}`, "success");
            
            // Clear cart
            appState.cart = [];
            appState.checkoutStep = 1;
            updateCartDisplay();
            updateCheckoutSteps();
            
            // Show order confirmation
            const confirmationHTML = `
                <div style="text-align: center; padding: 50px 0;">
                    <div style="width: 80px; height: 80px; background: var(--accent-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 25px;">
                        <i class="fas fa-check"></i>
                    </div>
                    <h3 style="font-size: 1.8rem; margin-bottom: 15px; color: var(--dark-color);">سفارش شما با موفقیت ثبت شد!</h3>
                    <p style="color: var(--text-light); margin-bottom: 10px; font-size: 1.1rem;">شماره سفارش: <strong>${newOrder.id}</strong></p>
                    <p style="color: var(--text-light); margin-bottom: 30px;">به زودی با شما تماس گرفته می‌شود.</p>
                    
                    <div style="max-width: 500px; margin: 30px auto; padding: 25px; background: #f9f9f9; border-radius: 12px; text-align: right;">
                        <h4 style="margin-bottom: 15px; color: var(--dark-color);">اطلاعات سفارش:</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.95rem;">
                            <div style="color: var(--text-light);">شماره سفارش:</div>
                            <div style="font-weight: 600;">${newOrder.id}</div>
                            
                            <div style="color: var(--text-light);">تاریخ ثبت:</div>
                            <div>${newOrder.date}</div>
                            
                            <div style="color: var(--text-light);">مبلغ کل:</div>
                            <div style="color: var(--primary-color); font-weight: 700;">${formatPrice(newOrder.total)}</div>
                            
                            <div style="color: var(--text-light);">وضعیت:</div>
                            <div><span class="order-status status-processing">در حال پردازش</span></div>
                            
                            <div style="color: var(--text-light);">روش پرداخت:</div>
                            <div>${newOrder.payment === 'cash' ? 'پرداخت در محل' : 'پرداخت آنلاین'}</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 40px;">
                        <button class="btn btn-primary" onclick="showAccountPage('orders')">
                            <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i>مشاهده سفارش‌ها
                        </button>
                        <button class="btn" onclick="showHomePage()">
                            <i class="fas fa-home" style="margin-left: 8px;"></i>بازگشت به صفحه اصلی
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('checkoutSection').querySelector('.checkout-content').innerHTML = confirmationHTML;
            
            // Reset after 5 seconds
            setTimeout(() => {
                showHomePage();
            }, 10000);
        }

        // انتخاب شهر
        function selectCity(city) {
            appState.currentCity = city;
            elements.currentCity.textContent = city;
            closeModal('locationModal');
            showNotification(`شهر ارسال به ${city} تغییر یافت`, "success");
            loadCities();
        }

        function loadCities() {
            const modalContent = document.querySelector('#locationModal .modal-content > div');
            let citiesHTML = '';
            
            appData.cities.forEach(city => {
                citiesHTML += `
                    <button onclick="selectCity('${city}')" 
                            style="padding: 15px; border: 2px solid ${appState.currentCity === city ? 'var(--primary-color)' : '#e0e0e0'}; 
                                   border-radius: 10px; background: ${appState.currentCity === city ? 'var(--primary-light)' : 'white'}; 
                                   color: ${appState.currentCity === city ? 'var(--primary-color)' : '#333'}; 
                                   font-weight: ${appState.currentCity === city ? '700' : '500'}; 
                                   cursor: pointer; transition: var(--transition); text-align: center;">
                        <i class="fas fa-map-marker-alt" style="margin-left: 8px; color: ${appState.currentCity === city ? 'var(--primary-color)' : '#999'}"></i>
                        ${city}
                    </button>
                `;
            });
            
            modalContent.innerHTML = citiesHTML;
        }

        // مدیریت کاربر
        function login() {
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!phone || !password) {
                showNotification("لطفاً شماره موبایل و رمز عبور را وارد کنید", "warning");
                return;
            }
            
            if (phone.length < 10) {
                showNotification("شماره موبایل معتبر نیست", "warning");
                return;
            }
            
            // Simulate login
            appState.user = {
                name: "احمد رحیمی",
                phone: phone,
                email: "ahmad@example.com",
                nationalId: "1234567890",
                joinDate: "۱۴۰۲/۰۱/۱۵",
                gender: "male"
            };
            
            closeModal('loginModal');
            showNotification(`خوش آمدید ${appState.user.name} عزیز!`, "success");
            
            // Update account button
            elements.accountBtn.innerHTML = `
                <i class="fas fa-user action-icon"></i>
                <span>${appState.user.name.split(' ')[0]}</span>
            `;
        }

        function register() {
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const email = document.getElementById('registerEmail').value;
            const nationalId = document.getElementById('registerNationalId').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const acceptTerms = document.getElementById('acceptTerms').checked;
            
            if (!name || !phone || !password) {
                showNotification("لطفاً فیلدهای ضروری را پر کنید", "warning");
                return;
            }
            
            if (phone.length < 10) {
                showNotification("شماره موبایل معتبر نیست", "warning");
                return;
            }
            
            if (password.length < 6) {
                showNotification("رمز عبور باید حداقل ۶ کاراکتر باشد", "warning");
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification("رمز عبور و تکرار آن مطابقت ندارند", "error");
                return;
            }
            
            if (!acceptTerms) {
                showNotification("لطفاً با قوانین و مقررات موافقت کنید", "warning");
                return;
            }
            
            // Simulate registration
            appState.user = {
                name: name,
                phone: phone,
                email: email || null,
                nationalId: nationalId || null,
                joinDate: new Date().toLocaleDateString('fa-IR'),
                gender: null
            };
            
            closeModal('registerModal');
            showNotification("حساب کاربری شما با موفقیت ایجاد شد!", "success");
            
            // Update account button
            elements.accountBtn.innerHTML = `
                <i class="fas fa-user action-icon"></i>
                <span>${appState.user.name.split(' ')[0]}</span>
            `;
        }

        function logout() {
            appState.user = null;
            showHomePage();
            
            // Reset account button
            elements.accountBtn.innerHTML = `
                <i class="fas fa-user action-icon"></i>
                <span>حساب کاربری</span>
            `;
            
            showNotification("از حساب کاربری خود خارج شدید", "info");
        }

        // مدیریت آدرس
        function saveAddress() {
            const title = document.getElementById('addressTitle').value;
            const city = document.getElementById('addressCity').value;
            const area = document.getElementById('addressArea').value;
            const address = document.getElementById('addressFull').value;
            const postalCode = document.getElementById('addressPostalCode').value;
            const phone = document.getElementById('addressPhone').value;
            const isDefault = document.getElementById('addressDefault').checked;
            
            if (!title || !city || !area || !address || !phone) {
                showNotification("لطفاً فیلدهای ضروری را پر کنید", "warning");
                return;
            }
            
            if (phone.length < 10) {
                showNotification("شماره تماس معتبر نیست", "warning");
                return;
            }
            
            const newAddress = {
                id: appData.userAddresses.length + 1,
                title: title,
                city: city,
                area: area,
                address: address,
                postalCode: postalCode || '',
                phone: phone,
                isDefault: isDefault || appData.userAddresses.length === 0
            };
            
            // If this is default, remove default from others
            if (newAddress.isDefault) {
                appData.userAddresses.forEach(addr => {
                    addr.isDefault = false;
                });
            }
            
            appData.userAddresses.push(newAddress);
            closeModal('addressModal');
            showNotification("آدرس جدید با موفقیت افزوده شد", "success");
            
            // Clear form
            document.getElementById('addressTitle').value = '';
            document.getElementById('addressCity').value = '';
            document.getElementById('addressArea').value = '';
            document.getElementById('addressFull').value = '';
            document.getElementById('addressPostalCode').value = '';
            document.getElementById('addressPhone').value = '';
            document.getElementById('addressDefault').checked = false;
            
            // Reload addresses if in account page
            if (appState.currentPage === 'account') {
                showAccountPage('addresses');
            }
        }

        // خبرنامه
        function subscribeNewsletter() {
            const email = document.getElementById('newsletterEmail').value;
            
            if (!email || !email.includes('@')) {
                showNotification("لطفاً یک ایمیل معتبر وارد کنید", "warning");
                return;
            }
            
            document.getElementById('newsletterEmail').value = '';
            showNotification("ایمیل شما با موفقیت در خبرنامه ثبت شد", "success");
        }

        // بارگذاری محتوا
        function loadCategories() {
            let html = '';
            appData.categories.forEach(category => {
                html += `
                    <div class="category-item bounce" onclick="showCategory('${category.slug}')">
                        <div class="category-icon" style="background: ${category.color}20; color: ${category.color};">
                            <i class="${category.icon}"></i>
                        </div>
                        <div class="category-name">${category.name}</div>
                        <div style="font-size: 0.75rem; color: #999; margin-top: 5px;">${category.count} محصول</div>
                    </div>
                `;
            });
            elements.categoriesGrid.innerHTML = html;
        }

        function loadProducts() {
            let html = '';
            appData.featuredProducts.forEach(product => {
                const badgeClass = product.badge === "discount" ? "discount" : 
                                  product.badge === "new" ? "new" : "hot";
                
                html += `
                    <div class="product-card">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            <span class="product-badge ${badgeClass}">
                                ${product.badge === "discount" ? "تخفیف" : 
                                  product.badge === "new" ? "جدید" : "پرفروش"}
                            </span>
                            <div class="product-actions">
                                <button class="action-icon-btn" title="افزودن به علاقه‌مندی‌ها" onclick="addToWishlist(${product.id})">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon-btn" title="افزودن به مقایسه" onclick="addToCompare(${product.id})">
                                    <i class="fas fa-balance-scale"></i>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-title">${product.name}</div>
                            <div class="product-rating">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                <span style="color: #777; font-size: 0.85rem;">(${product.rating})</span>
                            </div>
                            <div class="product-price">
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <button class="add-to-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> افزودن به سبد
                            </button>
                        </div>
                    </div>
                `;
            });
            elements.featuredProducts.innerHTML = html;
        }

        function loadNewProducts() {
            let html = '';
            appData.newProducts.forEach(product => {
                const badgeClass = product.badge === "discount" ? "discount" : 
                                  product.badge === "new" ? "new" : "hot";
                
                html += `
                    <div class="product-card">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            <span class="product-badge ${badgeClass}">
                                ${product.badge === "discount" ? "تخفیف" : 
                                  product.badge === "new" ? "جدید" : "پرفروش"}
                            </span>
                            <div class="product-actions">
                                <button class="action-icon-btn" title="افزودن به علاقه‌مندی‌ها" onclick="addToWishlist(${product.id})">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-icon-btn" title="افزودن به مقایسه" onclick="addToCompare(${product.id})">
                                    <i class="fas fa-balance-scale"></i>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-title">${product.name}</div>
                            <div class="product-rating">
                                ${'★'.repeat(Math.floor(product.rating))}${'☆'.repeat(5 - Math.floor(product.rating))}
                                <span style="color: #777; font-size: 0.85rem;">(${product.rating})</span>
                            </div>
                            <div class="product-price">
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <button class="add-to-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> افزودن به سبد
                            </button>
                        </div>
                    </div>
                `;
            });
            elements.newProducts.innerHTML = html;
        }

        function loadBrands() {
            let html = '';
            appData.brands.forEach(brand => {
                html += `
                    <div class="brand-item bounce">
                        <img src="${brand.logo}" alt="${brand.name}">
                    </div>
                `;
            });
            elements.brandsSlider.innerHTML = html;
        }

        function loadTestimonials() {
            let html = '';
            appData.testimonials.forEach(testimonial => {
                html += `
                    <div class="testimonial-card bounce">
                        <div class="testimonial-header">
                            <div class="customer-avatar">${testimonial.name.charAt(0)}</div>
                            <div class="customer-info">
                                <h4>${testimonial.name}</h4>
                                <div class="rating">
                                    ${'★'.repeat(testimonial.rating)}${'☆'.repeat(5 - testimonial.rating)}
                                    <span style="color: #777; margin-right: 10px; font-size: 0.85rem;">
                                        <i class="fas fa-map-marker-alt" style="margin-left: 5px;"></i>${testimonial.city}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="testimonial-text">
                            "${testimonial.text}"
                        </div>
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;">
                            <div style="font-size: 0.85rem; color: #888;">
                                <i class="fas fa-shopping-bag" style="margin-left: 8px;"></i> خرید: ${testimonial.product}
                            </div>
                            <div style="font-size: 0.8rem; color: #999; margin-top: 5px;">${testimonial.date}</div>
                        </div>
                    </div>
                `;
            });
            elements.testimonialsSlider.innerHTML = html;
        }

        function loadBlogPosts() {
            let html = '';
            appData.blogPosts.forEach(post => {
                html += `
                    <div class="blog-card bounce">
                        <div class="blog-image">
                            <img src="${post.image}" alt="${post.title}">
                        </div>
                        <div class="blog-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <span style="font-size: 0.8rem; color: var(--primary-color); background: var(--primary-light); padding: 4px 10px; border-radius: 4px;">${post.category}</span>
                                <span style="font-size: 0.8rem; color: #999;">${post.readTime}</span>
                            </div>
                            <h3 class="blog-title">${post.title}</h3>
                            <p class="blog-excerpt">${post.excerpt}</p>
                            <div class="blog-meta">
                                <span><i class="far fa-calendar" style="margin-left: 5px;"></i> ${post.date}</span>
                                <a href="#" style="color: var(--primary-color); font-size: 0.85rem;">ادامه مطلب <i class="fas fa-arrow-left"></i></a>
                            </div>
                        </div>
                    </div>
                `;
            });
            elements.blogGrid.innerHTML = html;
        }

        function loadDiscounts() {
            let html = '';
            appData.discounts.forEach(discount => {
                html += `
                    <div class="discount-card bounce">
                        <div class="discount-percent">${discount.percent}%</div>
                        <h3 style="font-size: 1.2rem; margin-bottom: 10px; color: var(--dark-color);">${discount.title}</h3>
                        <p style="color: var(--text-light); margin-bottom: 15px; font-size: 0.9rem; line-height: 1.5;">${discount.description}</p>
                        <div style="background: #f5f5f5; padding: 12px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                            <div style="font-size: 0.85rem; color: #777; margin-bottom: 5px;">کد تخفیف</div>
                            <div style="font-family: monospace; font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 2px;">${discount.code}</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.85rem; color: var(--text-light);">حداقل خرید: ${formatPrice(discount.minPurchase)}</span>
                            <span style="font-size: 0.85rem; color: #e74c3c;">${discount.expireDate} <i class="far fa-clock" style="margin-right: 5px;"></i></span>
                        </div>
                        <button class="btn" style="width: 100%; margin-top: 20px; padding: 12px;" onclick="copyDiscountCode('${discount.code}')">
                            <i class="fas fa-copy" style="margin-left: 8px;"></i>کپی کد تخفیف
                        </button>
                    </div>
                `;
            });
            elements.discountCards.innerHTML = html;
        }

        function loadRecommendedProducts() {
            let html = '';
            appData.recommendedProducts.forEach(product => {
                const badgeClass = product.badge === "discount" ? "discount" : 
                                  product.badge === "new" ? "new" : "hot";
                
                html += `
                    <div class="product-card" style="min-width: 250px;">
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}">
                            <span class="product-badge ${badgeClass}">
                                ${product.badge === "discount" ? "تخفیف" : 
                                  product.badge === "new" ? "جدید" : "پرفروش"}
                            </span>
                            <div class="product-actions">
                                <button class="action-icon-btn" title="افزودن به علاقه‌مندی‌ها" onclick="addToWishlist(${product.id})">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-icon-btn" title="مشاهده سریع" onclick="showQuickView(${product.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-title">${product.name}</div>
                            <div class="product-price">
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <button class="add-to-cart" onclick="addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> افزودن به سبد
                            </button>
                        </div>
                    </div>
                `;
            });
            elements.recommendedSlider.innerHTML = html;
        }

        function copyDiscountCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                showNotification(`کد تخفیف ${code} کپی شد`, "success");
            });
        }

        // تایمر پیشنهاد ویژه
        function startOfferTimer() {
            const hoursElement = document.getElementById('hours');
            const minutesElement = document.getElementById('minutes');
            const secondsElement = document.getElementById('seconds');
            
            let hours = 12;
            let minutes = 45;
            let seconds = 30;
            
            const timerInterval = setInterval(() => {
                seconds--;
                if (seconds < 0) {
                    seconds = 59;
                    minutes--;
                    if (minutes < 0) {
                        minutes = 59;
                        hours--;
                        if (hours < 0) {
                            hours = 0;
                            minutes = 0;
                            seconds = 0;
                            clearInterval(timerInterval);
                            showNotification("زمان پیشنهاد ویژه به پایان رسید", "warning");
                        }
                    }
                }
                
                hoursElement.textContent = hours.toString().padStart(2, '0');
                minutesElement.textContent = minutes.toString().padStart(2, '0');
                secondsElement.textContent = seconds.toString().padStart(2, '0');
            }, 1000);
        }

        // اسلایدر
        function initSlider() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.slider-dot');
            
            function showSlide(n) {
                slides.forEach(slide => slide.classList.remove('active'));
                dots.forEach(dot => dot.classList.remove('active'));
                
                currentSlide = (n + slides.length) % slides.length;
                
                slides[currentSlide].classList.add('active');
                dots[currentSlide].classList.add('active');
            }
            
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => showSlide(index));
            });
            
            // اسلایدر خودکار
            const slideInterval = setInterval(() => {
                showSlide(currentSlide + 1);
            }, 6000);
        }

        // دکمه بازگشت به بالا
        function initBackToTop() {
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    elements.backToTop.classList.add('visible');
                } else {
                    elements.backToTop.classList.remove('visible');
                }
            });
            
            elements.backToTop.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // رویدادها
        function setupEventListeners() {
            // انتخاب شهر
            elements.locationBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal('locationModal');
            });
            
            // بستن مودال‌ها
            elements.closeLocationModal.addEventListener('click', () => closeModal('locationModal'));
            elements.closeCartModal.addEventListener('click', () => closeModal('cartModal'));
            elements.closeLoginModal.addEventListener('click', () => closeModal('loginModal'));
            document.getElementById('closeRegisterModal').addEventListener('click', () => closeModal('registerModal'));
            document.getElementById('closeAddressModal').addEventListener('click', () => closeModal('addressModal'));
            document.getElementById('closeQuickView').addEventListener('click', () => closeModal('productQuickView'));
            
            // سبد خرید
            elements.cartBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal('cartModal');
            });
            
            // حساب کاربری
            elements.accountBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (!appState.user) {
                    openModal('loginModal');
                } else {
                    showAccountPage();
                }
            });
            
            // جستجو
            elements.searchBtn.addEventListener('click', () => {
                const query = elements.searchInput.value.trim();
                if (query) {
                    showNotification(`در حال جستجو برای "${query}"...`, "info");
                    // در حالت واقعی اینجا جستجو انجام می‌شود
                } else {
                    showNotification("لطفاً عبارت جستجو را وارد کنید", "warning");
                }
            });
            
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    elements.searchBtn.click();
                }
            });
            
            // منوی موبایل
            elements.mobileNavBtn.addEventListener('click', () => {
                elements.navLinks.classList.toggle('active');
            });
            
            // بستن مودال با کلیک خارج
            window.addEventListener('click', (e) => {
                if (e.target === elements.locationModal) closeModal('locationModal');
                if (e.target === elements.cartModal) closeModal('cartModal');
                if (e.target === elements.loginModal) closeModal('loginModal');
                if (e.target === document.getElementById('registerModal')) closeModal('registerModal');
                if (e.target === document.getElementById('addressModal')) closeModal('addressModal');
                if (e.target === document.getElementById('productQuickView')) closeModal('productQuickView');
            });
            
            // بستن منو با کلیک روی لینک
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    elements.navLinks.classList.remove('active');
                });
            });
            
            // پر کردن انتخاب شهر در مودال آدرس
            const citySelect = document.getElementById('addressCity');
            if (citySelect) {
                appData.cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            }
        }

        // مقداردهی اولیه
        function init() {
            loadCategories();
            loadProducts();
            loadNewProducts();
            loadBrands();
            loadTestimonials();
            loadBlogPosts();
            loadDiscounts();
            loadRecommendedProducts();
            loadCities();
            updateCartDisplay();
            updateCompareButton();
            initSlider();
            startOfferTimer();
            initBackToTop();
            setupEventListeners();
            
            // آمار پویا
            document.getElementById('customerCount').textContent = "۵۰,۰۰۰+";
            document.getElementById('productCount').textContent = "۱۰,۰۰۰+";
            document.getElementById('orderCount').textContent = "۱۰۰,۰۰۰+";
            document.getElementById('cityCount').textContent = "۳۴+";
            
            // نمایش پیام خوش‌آمدگویی
            setTimeout(() => {
                showNotification(`به فروشگاه بزرگ افغانستان خوش آمدید! 🛍️ شهر انتخابی: ${appState.currentCity}`, "info");
            }, 1500);
        }

        // صادر کردن توابع برای استفاده در onclick
        window.addToCart = addToCart;
        window.removeFromCart = removeFromCart;
        window.updateCartQuantity = updateCartQuantity;
        window.selectCity = selectCity;
        window.startCheckout = startCheckout;
        window.nextStep = nextStep;
        window.prevStep = prevStep;
        window.completeOrder = completeOrder;
        window.openModal = openModal;
        window.closeModal = closeModal;
        window.showHomePage = showHomePage;
        window.showProductDetail = showProductDetail;
        window.showCategory = showCategory;
        window.showAccountPage = showAccountPage;
        window.showAccountSection = showAccountSection;
        window.selectAddress = selectAddress;
        window.selectPayment = selectPayment;
        window.selectProductOption = selectProductOption;
        window.updateProductQuantity = updateProductQuantity;
        window.addToCartAndGo = addToCartAndGo;
        window.addToWishlist = addToWishlist;
        window.addToCompare = addToCompare;
        window.removeFromCompare = removeFromCompare;
        window.showCompareSection = showCompareSection;
        window.closeCompareSection = closeCompareSection;
        window.showAllCategories = showAllCategories;
        window.showAllTestimonials = showAllTestimonials;
        window.showLoginModal = showLoginModal;
        window.showRegisterModal = showRegisterModal;
        window.login = login;
        window.register = register;
        window.logout = logout;
        window.saveAddress = saveAddress;
        window.setDefaultAddress = setDefaultAddress;
        window.removeFromWishlist = removeFromWishlist;
        window.clearCompareList = clearCompareList;
        window.viewOrderDetails = viewOrderDetails;
        window.showQuickView = showQuickView;
        window.filterByPrice = filterByPrice;
        window.filterByBrand = filterByBrand;
        window.filterByRating = filterByRating;
        window.filterByStatus = filterByStatus;
        window.resetFilters = resetFilters;
        window.subscribeNewsletter = subscribeNewsletter;
        window.copyDiscountCode = copyDiscountCode;

        // بارگذاری صفحه
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>